!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.universe=e()}}(function(){var e;return function n(e,t,r){function i(u,a){if(!t[u]){if(!e[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=t[u]={exports:{}};e[u][0].call(f.exports,function(n){var t=e[u][1][n];return i(t?t:n)},f,f.exports,n,e,t,r)}return t[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,n,t){!function(e){function n(e){return e}function t(e,n,t){for(var r=0,i=n.length,o=t?JSON.parse(JSON.stringify(e)):new Array(i);r<i;++r)o[r]=e[n[r]];return o}function r(e){function n(n,t,r,i){for(;r<i;){var o=r+i>>>1;e(n[o])<t?r=o+1:i=o}return r}function t(n,t,r,i){for(;r<i;){var o=r+i>>>1;t<e(n[o])?i=o:r=o+1}return r}return t.right=t,t.left=n,t}function o(e){function n(e,n,t){for(var i=t-n,o=(i>>>1)+1;--o>0;)r(e,o,i,n);return e}function t(e,n,t){for(var i,o=t-n;--o>0;)i=e[n],e[n]=e[n+o],e[n+o]=i,r(e,1,o,n);return e}function r(n,t,r,i){for(var o,u=n[--i+t],a=e(u);(o=t<<1)<=r&&(o<r&&e(n[i+o])>e(n[i+o+1])&&o++,!(a<=e(n[i+o])));)n[i+t]=n[i+o],t=o;n[i+t]=u}return n.sort=t,n}function u(e){function n(n,r,i,o){var u,a,c,s,f=new Array(o=Math.min(i-r,o));for(a=0;a<o;++a)f[a]=n[r++];if(t(f,0,o),r<i){u=e(f[0]);do(c=e(s=n[r])>u)&&(f[0]=s,u=e(t(f,0,o)[0]));while(++r<i)}return f}var t=o(e);return n}function a(e){function n(n,t,r){for(var i=t+1;i<r;++i){for(var o=i,u=n[i],a=e(u);o>t&&e(n[o-1])>a;--o)n[o]=n[o-1];n[o]=u}return n}return n}function c(e){function n(e,n,i){return(i-n<z?r:t)(e,n,i)}function t(t,r,i){var o,u=(i-r)/6|0,a=r+u,c=i-1-u,s=r+i-1>>1,f=s-u,l=s+u,p=t[a],d=e(p),v=t[f],h=e(v),y=t[s],m=e(y),g=t[l],x=e(g),b=t[c],k=e(b);d>h&&(o=p,p=v,v=o,o=d,d=h,h=o),x>k&&(o=g,g=b,b=o,o=x,x=k,k=o),d>m&&(o=p,p=y,y=o,o=d,d=m,m=o),h>m&&(o=v,v=y,y=o,o=h,h=m,m=o),d>x&&(o=p,p=g,g=o,o=d,d=x,x=o),m>x&&(o=y,y=g,g=o,o=m,m=x,x=o),h>k&&(o=v,v=b,b=o,o=h,h=k,k=o),h>m&&(o=v,v=y,y=o,o=h,h=m,m=o),x>k&&(o=g,g=b,b=o,o=x,x=k,k=o);var w=v,j=h,A=g,O=x;t[a]=p,t[f]=t[r],t[s]=y,t[l]=t[i-1],t[c]=b;var _=r+1,E=i-2,S=j<=O&&j>=O;if(S)for(var L=_;L<=E;++L){var R=t[L],q=e(R);if(q<j)L!==_&&(t[L]=t[_],t[_]=R),++_;else if(q>j)for(;;){var $=e(t[E]);{if(!($>j)){if($<j){t[L]=t[_],t[_++]=t[E],t[E--]=R;break}t[L]=t[E],t[E--]=R;break}E--}}}else for(var L=_;L<=E;L++){var R=t[L],q=e(R);if(q<j)L!==_&&(t[L]=t[_],t[_]=R),++_;else if(q>O)for(;;){var $=e(t[E]);{if(!($>O)){$<j?(t[L]=t[_],t[_++]=t[E],t[E--]=R):(t[L]=t[E],t[E--]=R);break}if(E--,E<L)break}}}if(t[r]=t[_-1],t[_-1]=w,t[i-1]=t[E+1],t[E+1]=A,n(t,r,_-1),n(t,E+2,i),S)return t;if(_<a&&E>c){for(var z,$;(z=e(t[_]))<=j&&z>=j;)++_;for(;($=e(t[E]))<=O&&$>=O;)--E;for(var L=_;L<=E;L++){var R=t[L],q=e(R);if(q<=j&&q>=j)L!==_&&(t[L]=t[_],t[_]=R),_++;else if(q<=O&&q>=O)for(;;){var $=e(t[E]);{if(!($<=O&&$>=O)){$<j?(t[L]=t[_],t[_++]=t[E],t[E--]=R):(t[L]=t[E],t[E--]=R);break}if(E--,E<L)break}}}}return n(t,_,E+1)}var r=a(e);return n}function s(e){for(var n=new Array(e),t=-1;++t<e;)n[t]=0;return n}function f(e,n){for(var t=e.length;t<n;)e[t++]=0;return e}function p(e,n){if(n>32)throw new Error("invalid array width!");return e}function d(e){this.length=e,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=I(e)}function v(e,n){return function(t){var r=t.length;return[e.left(t,n,0,r),e.right(t,n,0,r)]}}function h(e,n){var t=n[0],r=n[1];return function(n){var i=n.length;return[e.left(n,t,0,i),e.left(n,r,0,i)]}}function y(e){return[0,e.length]}function m(){return null}function g(){return 0}function x(e){return e+1}function b(e){return e-1}function w(e){return function(n,t){return n+ +e(t)}}function j(e){return function(n,t){return n-e(t)}}function A(){function e(e){var n=z,t=e.length;return t&&($=$.concat(e),R.lengthen(z+=t),T.forEach(function(r){r(e,n,t)}),L("dataAdded")),q}function r(){for(var e=O(z,z),n=[],t=0,r=0;t<z;++t)R.zero(t)?n.push(t):e[t]=r++;I.forEach(function(e){e(-1,-1,[],n,!0)}),C.forEach(function(n){n(e)});for(var t=0,r=0;t<z;++t)R.zero(t)||(t!==r&&(R.copy(r,t),$[r]=$[t]),++r);$.length=z=r,R.truncate(r),L("dataRemoved")}function a(e,r){function a(n,o,u){if(r){for(ye=0,v=0,k=[],i=0;i<n.length;i++)for(v=0,k=e(n[i]);v<k.length;v++)ye++;ee=[],re=_(n.length),oe=O(ye,1),ae=[];var a=_(ye);for(l=0,i=0;i<n.length;i++)if(k=e(n[i]),k.length)for(re[i]=k.length,v=0;v<k.length;v++)ee.push(k[v]),a[l]=i,l++;else re[i]=0,ae.push(i);var c=fe(_(ye),0,ye);ee=t(ee,c),ne=t(a,c)}else ee=n.map(e),ne=fe(_(u),0,u),ee=t(ee,ne);r&&(u=ye);var s=le(ee),f=s[0],p=s[1];if(ce)for(i=0;i<u;++i)ce(ee[i],i)||(R[G][ne[i]+o]|=Q,r&&(oe[i]=1));else{for(i=0;i<f;++i)R[G][ne[i]+o]|=Q,r&&(oe[i]=1);for(i=p;i<u;++i)R[G][ne[i]+o]|=Q,r&&(oe[i]=1)}if(!o)return Y=ee,H=ne,te=re,ie=oe,ve=f,void(he=p);if(X=Y,Z=H,ue=ie,i0=0,i1=0,r&&(old_n0=o,o=X.length,u=ye),Y=r?new Array(o+u):new Array(z),H=r?new Array(o+u):O(z,z),r&&(ie=O(o+u,1)),r){var d=te.length;te=N(te,z);for(var v=0;v+d<z;v++)te[v+d]=re[v]}for(i=0;i0<o&&i1<u;++i)X[i0]<ee[i1]?(Y[i]=X[i0],r&&(ie[i]=ue[i0]),H[i]=Z[i0++]):(Y[i]=ee[i1],r&&(ie[i]=ue[i1]),H[i]=ne[i1++]+(r?old_n0:o));for(;i0<o;++i0,++i)Y[i]=X[i0],r&&(ie[i]=ue[i0]),H[i]=Z[i0];for(;i1<u;++i1,++i)Y[i]=ee[i1],r&&(ie[i]=ue[i1]),H[i]=ne[i1]+(r?old_n0:o);s=le(Y),ve=s[0],he=s[1]}function s(e,n,t){pe.forEach(function(e){e(ee,ne,n,t)}),ee=ne=null}function f(e){for(var n,t=0,r=0;t<z;++t)R.zero(n=H[t])||(t!==r&&(Y[r]=Y[t]),H[r]=e[n],++r);for(Y.length=r;r<z;)H[r++]=0;var i=le(Y);ve=i[0],he=i[1]}function p(e){var n=e[0],t=e[1];if(ce)return ce=null,U(function(e,r){return n<=r&&r<t},0===e[0]&&e[1]===H.length),ve=n,he=t,se;var i,o,u,a=[],c=[],s=[],f=[];if(n<ve)for(i=n,o=Math.min(ve,t);i<o;++i)a.push(H[i]),s.push(i);else if(n>ve)for(i=ve,o=Math.min(n,he);i<o;++i)c.push(H[i]),f.push(i);if(t>he)for(i=Math.max(n,he),o=t;i<o;++i)a.push(H[i]),s.push(i);else if(t<he)for(i=Math.max(ve,t),o=he;i<o;++i)c.push(H[i]),f.push(i);if(r){var l=[],p=[];for(i=0;i<a.length;i++)te[a[i]]++,ie[s[i]]=0,1===te[a[i]]&&(R[G][a[i]]^=Q,l.push(a[i]));for(i=0;i<c.length;i++)te[c[i]]--,ie[f[i]]=1,0===te[c[i]]&&(R[G][c[i]]^=Q,p.push(c[i]));if(a=l,c=p,0===e[0]&&e[1]===H.length)for(i=0;i<ae.length;i++)R[G][u=ae[i]]&Q&&(R[G][u]^=Q,a.push(u));else for(i=0;i<ae.length;i++)R[G][u=ae[i]]&Q||(R[G][u]^=Q,c.push(u))}else{for(i=0;i<a.length;i++)R[G][a[i]]^=Q;for(i=0;i<c.length;i++)R[G][c[i]]^=Q}return ve=n,he=t,I.forEach(function(e){e(Q,G,a,c)}),L("filtered"),se}function d(e){return null==e?F():Array.isArray(e)?q(e):"function"==typeof e?M(e):A(e)}function A(e){return p((le=v(S,e))(Y))}function q(e){return p((le=h(S,e))(Y))}function F(){return p((le=y)(Y))}function M(e){return le=y,U(ce=e,!1),ve=0,he=z,se}function U(e,n){var t,i,o,u=[],a=[],c=[],s=[],f=H.length;if(!r)for(t=0;t<f;++t)!(R[G][i=H[t]]&Q)^!!(o=e(Y[t],t))&&(o?u.push(i):a.push(i));if(r)for(t=0;t<f;++t)e(Y[t],t)?(u.push(H[t]),c.push(t)):(a.push(H[t]),s.push(t));if(r){var l=[],p=[];for(t=0;t<u.length;t++)1===ie[c[t]]&&(te[u[t]]++,ie[c[t]]=0,1===te[u[t]]&&(R[G][u[t]]^=Q,l.push(u[t])));for(t=0;t<a.length;t++)0===ie[s[t]]&&(te[a[t]]--,ie[s[t]]=1,0===te[a[t]]&&(R[G][a[t]]^=Q,p.push(a[t])));if(u=l,a=p,n)for(t=0;t<ae.length;t++)R[G][i=ae[t]]&Q&&(R[G][i]^=Q,u.push(i));else for(t=0;t<ae.length;t++)R[G][i=ae[t]]&Q||(R[G][i]^=Q,a.push(i))}else{for(t=0;t<u.length;t++)R[G][u[t]]&Q&&(R[G][u[t]]&=W);for(t=0;t<a.length;t++)R[G][a[t]]&Q||(R[G][a[t]]|=Q)}I.forEach(function(e){e(Q,G,u,a)}),L("filtered")}function D(e){for(var n,t=[],i=he;--i>=ve&&e>0;)R.zero(n=H[i])&&(t.push($[n]),--e);if(r)for(i=0;i<ae.length&&e>0;i++)R.zero(n=ae[i])&&(t.push($[n]),--e);return t}function B(e){var n,t,i=[];if(r)for(n=0;n<ae.length&&e>0;n++)R.zero(t=ae[n])&&(i.push($[t]),--e);for(n=ve;n<he&&e>0;)R.zero(t=H[n])&&(i.push($[t]),--e),n++;return i}function K(e){function a(n,o,u,a){function c(){return r?void X++:void(++X===J&&(k=P(k,V<<=1),F=P(F,V),J=E(V)))}r&&(n0old=u,u=Y.length-n.length,a=n.length);var d,v,h,y,g,x,b=T,k=r?[]:O(X,J),w=D,j=B,A=K,_=X,S=0,L=0;for(ne&&(w=A=m),ne&&(j=A=m),T=new Array(X),X=0,F=r?_>1?F:[]:_>1?N(F,z):O(z,J),_&&(h=(v=b[0]).key);L<a&&!((y=e(n[L]))>=y);)++L;for(;L<a;){for(v&&h<=y?(g=v,x=h,k[S]=X,(v=b[++S])&&(h=v.key)):(g={key:y,value:A()},x=y),T[X]=g;y<=x&&(d=o[L]+(r?n0old:u),r?F[d]?F[d].push(X):F[d]=[X]:F[d]=X,g.value=w(g.value,$[d],!0),R.zeroExcept(d,G,W)||(g.value=j(g.value,$[d],!1)),!(++L>=a));)y=e(n[L]);c()}for(;S<_;)T[k[S]=X]=b[S++],c();if(r)for(i=0;i<z;i++)F[i]||(F[i]=[]);if(X>S)if(r)F=t(F,k,!0);else for(S=0;S<u;++S)F[S]=k[F[S]];d=I.indexOf(Z),X>1?(Z=s,ee=l):(!X&&te&&(X=1,T=[{key:null,value:A()}]),1===X?(Z=f,ee=p):(Z=m,ee=m),F=null),I[d]=Z}function c(){if(X>1){for(var e=X,n=T,t=O(e,e),r=0,i=0;r<z;++r)R.zero(r)||(t[F[i]=F[r]]=1,++i);for(T=[],X=0,r=0;r<e;++r)t[r]&&(t[r]=X++,T.push(n[r]));if(X>1)for(var r=0;r<i;++r)F[r]=t[F[r]];else F=null;I[I.indexOf(Z)]=X>1?(ee=l,Z=s):1===X?(ee=p,Z=f):ee=Z=m}else if(1===X){if(te)return;for(var r=0;r<z;++r)if(!R.zero(r))return;T=[],X=0,I[I.indexOf(Z)]=Z=ee=m}}function s(e,n,t,i,o){if(!(e===Q&&n===G||ne)){var u,a,c,s,f;if(r){for(u=0,s=t.length;u<s;++u)if(R.zeroExcept(c=t[u],G,W))for(a=0;a<F[c].length;a++)f=T[F[c][a]],f.value=D(f.value,$[c],!1,a);for(u=0,s=i.length;u<s;++u)if(R.onlyExcept(c=i[u],G,W,n,e))for(a=0;a<F[c].length;a++)f=T[F[c][a]],f.value=B(f.value,$[c],o,a)}else{for(u=0,s=t.length;u<s;++u)R.zeroExcept(c=t[u],G,W)&&(f=T[F[c]],f.value=D(f.value,$[c],!1));for(u=0,s=i.length;u<s;++u)R.onlyExcept(c=i[u],G,W,n,e)&&(f=T[F[c]],f.value=B(f.value,$[c],o))}}}function f(e,n,t,r,i){if(!(e===Q&&n===G||ne)){var o,u,a,c=T[0];for(o=0,a=t.length;o<a;++o)R.zeroExcept(u=t[o],G,W)&&(c.value=D(c.value,$[u],!1));for(o=0,a=r.length;o<a;++o)R.onlyExcept(u=r[o],G,W,n,e)&&(c.value=B(c.value,$[u],i))}}function l(){var e,n,t;for(e=0;e<X;++e)T[e].value=K();if(r){for(e=0;e<z;++e)for(n=0;n<F[e].length;n++)t=T[F[e][n]],t.value=D(t.value,$[e],!0,n);for(e=0;e<z;++e)if(!R.zeroExcept(e,G,W))for(n=0;n<F[e].length;n++)t=T[F[e][n]],t.value=B(t.value,$[e],!1,n)}else{for(e=0;e<z;++e)t=T[F[e]],t.value=D(t.value,$[e],!0);for(e=0;e<z;++e)R.zeroExcept(e,G,W)||(t=T[F[e]],t.value=B(t.value,$[e],!1))}}function p(){var e,n=T[0];for(n.value=K(),e=0;e<z;++e)n.value=D(n.value,$[e],!0);for(e=0;e<z;++e)R.zeroExcept(e,G,W)||(n.value=B(n.value,$[e],!1))}function d(){return ne&&(ee(),ne=!1),T}function v(e){var n=M(d(),0,T.length,e);return U.sort(n,0,n.length)}function h(e,n,t){return D=e,B=n,K=t,ne=!0,q}function y(){return h(x,b,g)}function k(e){return h(w(e),j(e),g)}function A(e){function n(n){return e(n.value)}return M=u(n),U=o(n),q}function _(){return A(n)}function S(){return X}function L(){var e=I.indexOf(Z);return e>=0&&I.splice(e,1),e=pe.indexOf(a),e>=0&&pe.splice(e,1),e=C.indexOf(c),e>=0&&C.splice(e,1),q}var q={top:v,all:d,reduce:h,reduceCount:y,reduceSum:k,order:A,orderNatural:_,size:S,dispose:L,remove:L};de.push(q);var T,F,M,U,D,B,K,V=8,J=E(V),X=0,Z=m,ee=m,ne=!0,te=e===m;return arguments.length<1&&(e=n),I.push(Z),pe.push(a),C.push(c),a(Y,H,0,z),y().orderNatural()}function V(){var e=K(m),n=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return n()[0].value},e}function J(){de.forEach(function(e){e.dispose()});var e=T.indexOf(a);return e>=0&&T.splice(e,1),e=T.indexOf(s),e>=0&&T.splice(e,1),e=C.indexOf(f),e>=0&&C.splice(e,1),R.masks[G]&=W,F()}var Q,W,G,Y,H,X,Z,ee,ne,te,re,ie,oe,ue,ae,ce,se={filter:d,filterExact:A,filterRange:q,filterFunction:M,filterAll:F,top:D,bottom:B,group:K,groupAll:V,dispose:J,remove:J},fe=c(function(e){return ee[e]}),le=y,pe=[],de=[],ve=0,he=0,ye=0;T.unshift(a),T.push(s),C.push(f);var me=R.add();return G=me.offset,Q=me.one,W=~Q,a($,0,z),s($,0,z),se}function s(){function e(e,n){var t;if(!d)for(t=n;t<z;++t)c=s(c,$[t],!0),R.zero(t)||(c=f(c,$[t],!1))}function n(e,n,t,r,i){var o,u,a;if(!d){for(o=0,a=t.length;o<a;++o)R.zero(u=t[o])&&(c=s(c,$[u],i));for(o=0,a=r.length;o<a;++o)R.only(u=r[o],n,e)&&(c=f(c,$[u],i))}}function t(){var e;for(c=l(),e=0;e<z;++e)c=s(c,$[e],!0),R.zero(e)||(c=f(c,$[e],!1))}function r(e,n,t){return s=e,f=n,l=t,d=!0,p}function i(){return r(x,b,g)}function o(e){return r(w(e),j(e),g)}function u(){return d&&(t(),d=!1),c}function a(){var t=I.indexOf(n);return t>=0&&I.splice(t),t=T.indexOf(e),t>=0&&T.splice(t),p}var c,s,f,l,p={reduce:r,reduceCount:i,reduceSum:o,value:u,dispose:a,remove:a},d=!0;return I.push(n),T.push(e),e($,0,z),i()}function f(){return z}function p(){return $}function A(e){return"function"!=typeof e?void console.warn("onChange callback parameter must be a function!"):(F.push(e),function(){F.splice(F.indexOf(e),1)})}function L(e){for(var n=0;n<F.length;n++)F[n](e)}var R,q={add:e,remove:r,dimension:a,groupAll:s,size:f,all:p,onChange:A},$=[],z=0,I=[],T=[],C=[],F=[];return R=new d(0),arguments.length?e(arguments[0]):q}function O(e,n){return(n<257?I:n<65537?T:C)(e)}function _(e){for(var n=O(e,e),t=-1;++t<e;)n[t]=t;return n}function E(e){return 8===e?256:16===e?65536:4294967296}A.version="2.0.0-alpha.03",A.permute=t;var S=A.bisect=r(n);S.by=r;var L=A.heap=o(n);L.by=o;var R=A.heapselect=u(n);R.by=u;var q=A.insertionsort=a(n);q.by=a;var $=A.quicksort=c(n);$.by=c;var z=32,I=s,T=s,C=s,N=f,P=p;"undefined"!=typeof Uint8Array&&(I=function(e){return new Uint8Array(e)},T=function(e){return new Uint16Array(e)},C=function(e){return new Uint32Array(e)},N=function(e,n){if(e.length>=n)return e;var t=new e.constructor(n);return t.set(e),t},P=function(e,n){var t;switch(n){case 16:t=T(e.length);break;case 32:t=C(e.length);break;default:throw new Error("invalid array width!")}return t.set(e),t}),d.prototype.lengthen=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n)this[n]=N(this[n],e);this.length=e},d.prototype.add=function(){var e,n,t,r,i;for(r=0,i=this.subarrays;r<i;++r)if(e=this.masks[r],n=this.width-32*r,t=~e&-~e,!(n>=32)||t)return n<32&&t&1<<n&&(this[r]=P(this[r],n<<=1),this.width=32*r+n),this.masks[r]|=t,{offset:r,one:t};return this[this.subarrays]=I(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},d.prototype.copy=function(e,n){var t,r;for(t=0,r=this.subarrays;t<r;++t)this[t][e]=this[t][n]},d.prototype.truncate=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n){for(var r=this.length-1;r>=e;r--)this[n][r]=0;this[n].length=e}this.length=e},d.prototype.zero=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n)if(this[n][e])return!1;return!0},d.prototype.zeroExcept=function(e,n,t){var r,i;for(r=0,i=this.subarrays;r<i;++r)if(r===n?this[r][e]&t:this[r][e])return!1;return!0},d.prototype.only=function(e,n,t){var r,i;for(r=0,i=this.subarrays;r<i;++r)if(this[r][e]!=(r===n?t:0))return!1;return!0},d.prototype.onlyExcept=function(e,n,t,r,i){var o,u,a;for(u=0,a=this.subarrays;u<a;++u)if(o=this[u][e],u===n&&(o&=t),o!=(u===r?i:0))return!1;return!0},e.crossfilter=A}("undefined"!=typeof t&&t||this)},{}],2:[function(e,n,t){n.exports=e("./crossfilter").crossfilter},{"./crossfilter":1}],3:[function(e,n,t){(function(r){function i(e){return e&&e.Object===Object?e:null}function o(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(t){}return n}function u(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function a(){this.__data__=ue?ue(null):{}}function c(e){return this.has(e)&&delete this.__data__[e]}function s(e){var n=this.__data__;if(ue){var t=n[e];return t===N?void 0:t}return ne.call(n,e)?n[e]:void 0}function f(e){var n=this.__data__;return ue?void 0!==n[e]:ne.call(n,e)}function l(e,n){var t=this.__data__;return t[e]=ue&&void 0===n?N:n,this}function p(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function d(){this.__data__=[]}function v(e){var n=this.__data__,t=A(n,e);if(t<0)return!1;var r=n.length-1;return t==r?n.pop():ie.call(n,t,1),!0}function h(e){var n=this.__data__,t=A(n,e);return t<0?void 0:n[t][1]}function y(e){return A(this.__data__,e)>-1}function m(e,n){var t=this.__data__,r=A(t,e);return r<0?t.push([e,n]):t[r][1]=n,this}function g(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function x(){this.__data__={hash:new u,map:new(oe||p),string:new u}}function b(e){return O(this,e)["delete"](e)}function k(e){return O(this,e).get(e)}function w(e){return O(this,e).has(e)}function j(e,n){return O(this,e).set(e,n),this}function A(e,n){for(var t=e.length;t--;)if(R(e[t][0],n))return t;return-1}function O(e,n){var t=e.__data__;return E(n)?t["string"==typeof n?"string":"hash"]:t.map}function _(e,n){var t=e[n];return z(t)?t:void 0}function E(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}function S(e){if(null!=e){try{return ee.call(e)}catch(n){}try{return e+""}catch(n){}}return""}function L(e,n){if("function"!=typeof e||n&&"function"!=typeof n)throw new TypeError(C);var t=function(){var r=arguments,i=n?n.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var u=e.apply(this,r);return t.cache=o.set(i,u),u};return t.cache=new(L.Cache||g),t}function R(e,n){return e===n||e!==e&&n!==n}function q(e){var n=$(e)?te.call(e):"";return n==P||n==F}function $(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function z(e){if(!$(e))return!1;var n=q(e)||o(e)?re:B;return n.test(S(e))}function I(e){return null==e?"":T(e)}var T=e("lodash._basetostring"),C="Expected a function",N="__lodash_hash_undefined__",P="[object Function]",F="[object GeneratorFunction]",M=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,U=/[\\^$.*+?()[\]{}|]/g,D=/\\(\\)?/g,B=/^\[object .+?Constructor\]$/,K={"function":!0,object:!0},V=K[typeof t]&&t&&!t.nodeType?t:void 0,J=K[typeof n]&&n&&!n.nodeType?n:void 0,Q=i(V&&J&&"object"==typeof r&&r),W=i(K[typeof self]&&self),G=i(K[typeof window]&&window),Y=i(K[typeof this]&&this),H=Q||G!==(Y&&Y.window)&&G||W||Y||Function("return this")(),X=Array.prototype,Z=Object.prototype,ee=Function.prototype.toString,ne=Z.hasOwnProperty,te=Z.toString,re=RegExp("^"+ee.call(ne).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ie=X.splice,oe=_(H,"Map"),ue=_(Object,"create");u.prototype.clear=a,u.prototype["delete"]=c,u.prototype.get=s,u.prototype.has=f,u.prototype.set=l,p.prototype.clear=d,p.prototype["delete"]=v,p.prototype.get=h,p.prototype.has=y,p.prototype.set=m,g.prototype.clear=x,g.prototype["delete"]=b,g.prototype.get=k,g.prototype.has=w,g.prototype.set=j;var ae=L(function(e){var n=[];return I(e).replace(M,function(e,t,r,i){n.push(r?i.replace(D,"$1"):t||e)}),n});L.Cache=g,n.exports=ae}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._basetostring":4}],4:[function(e,n,t){(function(e){function r(e){return e&&e.Object===Object?e:null}function i(e){if("string"==typeof e)return e;if(u(e))return k?k.call(e):"";var n=e+"";return"0"==n&&1/e==-a?"-0":n}function o(e){return!!e&&"object"==typeof e}function u(e){return"symbol"==typeof e||o(e)&&g.call(e)==c}var a=1/0,c="[object Symbol]",s={"function":!0,object:!0},f=s[typeof t]&&t&&!t.nodeType?t:void 0,l=s[typeof n]&&n&&!n.nodeType?n:void 0,p=r(f&&l&&"object"==typeof e&&e),d=r(s[typeof self]&&self),v=r(s[typeof window]&&window),h=r(s[typeof this]&&this),y=p||v!==(h&&h.window)&&v||d||h||Function("return this")(),m=Object.prototype,g=m.toString,x=y.Symbol,b=x?x.prototype:void 0,k=b?b.toString:void 0;n.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,n,t){function r(e){return b(e)?e:l(e)}function i(e,n){if(b(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!s(e))||(m.test(e)||!y.test(e)||null!=n&&e in Object(n))}function o(e){if("string"==typeof e||s(e))return e;var n=e+"";return"0"==n&&1/e==-p?"-0":n}function u(e){var n=a(e)?x.call(e):"";return n==d||n==v}function a(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function c(e){return!!e&&"object"==typeof e}function s(e){return"symbol"==typeof e||c(e)&&x.call(e)==h}function f(e,n,t){n=i(n,e)?[n]:r(n);var a=-1,c=n.length;for(c||(e=void 0,c=1);++a<c;){var s=null==e?void 0:e[o(n[a])];void 0===s&&(a=c,s=t),e=u(s)?s.call(e):s}return e}var l=e("lodash._stringtopath"),p=1/0,d="[object Function]",v="[object GeneratorFunction]",h="[object Symbol]",y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/,g=Object.prototype,x=g.toString,b=Array.isArray;n.exports=f},{"lodash._stringtopath":3}],6:[function(e,n,t){function r(){p&&f&&(p=!1,f.length?l=f.concat(l):d=-1,l.length&&i())}function i(){if(!p){var e=a(r);p=!0;for(var n=l.length;n;){for(f=l,l=[];++d<n;)f&&f[d].run();d=-1,n=l.length}f=null,p=!1,c(e)}}function o(e,n){this.fun=e,this.array=n}function u(){}var a,c,s=n.exports={};!function(){try{a=setTimeout}catch(e){a=function(){throw new Error("setTimeout is not defined")}}try{c=clearTimeout}catch(e){c=function(){throw new Error("clearTimeout is not defined")}}}();var f,l=[],p=!1,d=-1;s.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];l.push(new o(e,n)),1!==l.length||p||a(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=u,s.addListener=u,s.once=u,s.off=u,s.removeListener=u,s.removeAllListeners=u,s.emit=u,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],7:[function(n,t,r){(function(n){!function(n){"use strict";if("function"==typeof bootstrap)bootstrap("promise",n);else if("object"==typeof r&&"object"==typeof t)t.exports=n();else if("function"==typeof e&&e.amd)e(n);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=n}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var i="undefined"!=typeof window?window:self,o=i.Q;i.Q=n(),i.Q.noConflict=function(){return i.Q=o,this}}}(function(){"use strict";function e(e){return function(){return G.apply(e,arguments)}}function t(e){return e===Object(e)}function r(e){return"[object StopIteration]"===re(e)||e instanceof V}function i(e,n){if(D&&n.stack&&"object"==typeof e&&null!==e&&e.stack&&e.stack.indexOf(ie)===-1){for(var t=[],r=n;r;r=r.source)r.stack&&t.unshift(r.stack);t.unshift(e.stack);var i=t.join("\n"+ie+"\n");e.stack=o(i)}}function o(e){for(var n=e.split("\n"),t=[],r=0;r<n.length;++r){var i=n[r];c(i)||u(i)||!i||t.push(i)}return t.join("\n")}function u(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function a(e){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(n)return[n[1],Number(n[2])];var t=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function c(e){var n=a(e);if(!n)return!1;var t=n[0],r=n[1];return t===K&&r>=J&&r<=se}function s(){if(D)try{throw new Error}catch(e){var n=e.stack.split("\n"),t=n[0].indexOf("@")>0?n[1]:n[2],r=a(t);if(!r)return;return K=r[0],r[1]}}function f(e,n,t){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n+" is deprecated, use "+t+" instead.",new Error("").stack),e.apply(e,arguments)}}function l(e){return e instanceof h?e:x(e)?S(e):E(e)}function p(){function e(e){n=e,o.source=e,H(t,function(n,t){l.nextTick(function(){e.promiseDispatch.apply(e,t)})},void 0),t=void 0,r=void 0}var n,t=[],r=[],i=ee(p.prototype),o=ee(h.prototype);if(o.promiseDispatch=function(e,i,o){var u=Y(arguments);t?(t.push(u),"when"===i&&o[1]&&r.push(o[1])):l.nextTick(function(){n.promiseDispatch.apply(n,u)})},o.valueOf=function(){if(t)return o;var e=m(n);return g(e)&&(n=e),e},o.inspect=function(){return n?n.inspect():{state:"pending"}},l.longStackSupport&&D)try{throw new Error}catch(u){o.stack=u.stack.substring(u.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(t){n||e(l(t))},i.fulfill=function(t){n||e(E(t))},i.reject=function(t){n||e(_(t))},i.notify=function(e){n||H(r,function(n,t){l.nextTick(function(){t(e)})},void 0)},i}function d(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var n=p();try{e(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}return n.promise}function v(e){return d(function(n,t){for(var r=0,i=e.length;r<i;r++)l(e[r]).then(n,t)})}function h(e,n,t){void 0===n&&(n=function(e){return _(new Error("Promise does not support operation: "+e))}),void 0===t&&(t=function(){return{state:"unknown"}});var r=ee(h.prototype);if(r.promiseDispatch=function(t,i,o){var u;try{u=e[i]?e[i].apply(r,o):n.call(r,i,o)}catch(a){u=_(a)}t&&t(u)},r.inspect=t,t){var i=t();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var e=t();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function y(e,n,t,r){return l(e).then(n,t,r)}function m(e){if(g(e)){var n=e.inspect();if("fulfilled"===n.state)return n.value}return e}function g(e){return e instanceof h}function x(e){return t(e)&&"function"==typeof e.then}function b(e){return g(e)&&"pending"===e.inspect().state}function k(e){return!g(e)||"fulfilled"===e.inspect().state}function w(e){return g(e)&&"rejected"===e.inspect().state}function j(){oe.length=0,ue.length=0,ce||(ce=!0)}function A(e,t){ce&&("object"==typeof n&&"function"==typeof n.emit&&l.nextTick.runAfter(function(){X(ue,e)!==-1&&(n.emit("unhandledRejection",t,e),ae.push(e))}),ue.push(e),t&&"undefined"!=typeof t.stack?oe.push(t.stack):oe.push("(no stack) "+t))}function O(e){if(ce){var t=X(ue,e);t!==-1&&("object"==typeof n&&"function"==typeof n.emit&&l.nextTick.runAfter(function(){var r=X(ae,e);r!==-1&&(n.emit("rejectionHandled",oe[t],e),ae.splice(r,1))}),ue.splice(t,1),oe.splice(t,1))}}function _(e){var n=h({when:function(n){return n&&O(this),n?n(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return A(n,e),n}function E(e){return h({when:function(){return e},get:function(n){return e[n]},set:function(n,t){e[n]=t},"delete":function(n){delete e[n]},post:function(n,t){return null===n||void 0===n?e.apply(void 0,t):e[n].apply(e,t)},apply:function(n,t){return e.apply(n,t)},keys:function(){return te(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function S(e){var n=p();return l.nextTick(function(){try{e.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}}),n.promise}function L(e){return h({isDef:function(){}},function(n,t){return T(e,n,t)},function(){return l(e).inspect()})}function R(e,n,t){return l(e).spread(n,t)}function q(e){return function(){function n(e,n){var u;if("undefined"==typeof StopIteration){try{u=t[e](n)}catch(a){return _(a)}return u.done?l(u.value):y(u.value,i,o)}try{u=t[e](n)}catch(a){return r(a)?l(a.value):_(a)}return y(u,i,o)}var t=e.apply(this,arguments),i=n.bind(n,"next"),o=n.bind(n,"throw");return i()}}function $(e){l.done(l.async(e)())}function z(e){throw new V(e)}function I(e){return function(){return R([this,C(arguments)],function(n,t){return e.apply(n,t)})}}function T(e,n,t){return l(e).dispatch(n,t)}function C(e){return y(e,function(e){var n=0,t=p();return H(e,function(r,i,o){var u;g(i)&&"fulfilled"===(u=i.inspect()).state?e[o]=u.value:(++n,y(i,function(r){e[o]=r,0===--n&&t.resolve(e)},t.reject,function(e){t.notify({index:o,value:e})}))},void 0),0===n&&t.resolve(e),t.promise})}function N(e){if(0===e.length)return l.resolve();var n=l.defer(),t=0;return H(e,function(r,i,o){function u(e){n.resolve(e)}function a(){t--,0===t&&n.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function c(e){n.notify({index:o,value:e})}var s=e[o];t++,y(s,u,a,c)},void 0),n.promise}function P(e){return y(e,function(e){return e=Z(e,l),y(C(Z(e,function(e){return y(e,Q,Q)})),function(){return e})})}function F(e){return l(e).allSettled()}function M(e,n){return l(e).then(void 0,void 0,n)}function U(e,n){return l(e).nodeify(n)}var D=!1;try{throw new Error}catch(B){D=!!B.stack}var K,V,J=s(),Q=function(){},W=function(){function e(){for(var e,n;r.next;)r=r.next,e=r.task,r.task=void 0,n=r.domain,n&&(r.domain=void 0,n.enter()),t(e,n);for(;c.length;)e=c.pop(),t(e);o=!1}function t(n,t){try{n()}catch(r){if(a)throw t&&t.exit(),setTimeout(e,0),t&&t.enter(),r;setTimeout(function(){throw r},0)}t&&t.exit()}var r={task:void 0,next:null},i=r,o=!1,u=void 0,a=!1,c=[];if(W=function(e){i=i.next={task:e,domain:a&&n.domain,next:null},o||(o=!0,u())},"object"==typeof n&&"[object process]"===n.toString()&&n.nextTick)a=!0,u=function(){n.nextTick(e)};else if("function"==typeof setImmediate)u="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var s=new MessageChannel;s.port1.onmessage=function(){u=f,s.port1.onmessage=e,e()};var f=function(){s.port2.postMessage(0)};u=function(){setTimeout(e,0),f()}}else u=function(){setTimeout(e,0)};return W.runAfter=function(e){c.push(e),o||(o=!0,u())},W}(),G=Function.call,Y=e(Array.prototype.slice),H=e(Array.prototype.reduce||function(e,n){var t=0,r=this.length;if(1===arguments.length)for(;;){if(t in this){n=this[t++];break}if(++t>=r)throw new TypeError}for(;t<r;t++)t in this&&(n=e(n,this[t],t));return n}),X=e(Array.prototype.indexOf||function(e){for(var n=0;n<this.length;n++)if(this[n]===e)return n;return-1}),Z=e(Array.prototype.map||function(e,n){var t=this,r=[];return H(t,function(i,o,u){r.push(e.call(n,o,u,t))},void 0),r}),ee=Object.create||function(e){function n(){}return n.prototype=e,new n},ne=e(Object.prototype.hasOwnProperty),te=Object.keys||function(e){var n=[];for(var t in e)ne(e,t)&&n.push(t);return n},re=e(Object.prototype.toString);V="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var ie="From previous event:";l.resolve=l,l.nextTick=W,l.longStackSupport=!1,"object"==typeof n&&n&&n.env&&n.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=p,p.prototype.makeNodeResolver=function(){var e=this;return function(n,t){n?e.reject(n):arguments.length>2?e.resolve(Y(arguments,1)):e.resolve(t)}},l.Promise=d,l.promise=d,d.race=v,d.all=C,d.reject=_,d.resolve=l,l.passByCopy=function(e){return e},h.prototype.passByCopy=function(){return this},l.join=function(e,n){return l(e).join(n)},h.prototype.join=function(e){return l([this,e]).spread(function(e,n){if(e===n)return e;throw new Error("Can't join: not the same: "+e+" "+n)})},l.race=v,h.prototype.race=function(){return this.then(l.race)},l.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(e,n,t){function r(n){try{return"function"==typeof e?e(n):n}catch(t){return _(t)}}function o(e){if("function"==typeof n){i(e,a);try{return n(e)}catch(t){return _(t)}}return _(e)}function u(e){return"function"==typeof t?t(e):e}var a=this,c=p(),s=!1;return l.nextTick(function(){a.promiseDispatch(function(e){s||(s=!0,c.resolve(r(e)))},"when",[function(e){s||(s=!0,c.resolve(o(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var n,t=!1;try{n=u(e)}catch(r){if(t=!0,!l.onerror)throw r;l.onerror(r)}t||c.notify(n)}]),c.promise},l.tap=function(e,n){return l(e).tap(n)},h.prototype.tap=function(e){return e=l(e),this.then(function(n){return e.fcall(n).thenResolve(n)})},l.when=y,h.prototype.thenResolve=function(e){return this.then(function(){return e})},l.thenResolve=function(e,n){return l(e).thenResolve(n)},h.prototype.thenReject=function(e){return this.then(function(){throw e})},l.thenReject=function(e,n){return l(e).thenReject(n)},l.nearer=m,l.isPromise=g,l.isPromiseAlike=x,l.isPending=b,h.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=k,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,h.prototype.isRejected=function(){return"rejected"===this.inspect().state;
};var oe=[],ue=[],ae=[],ce=!0;l.resetUnhandledRejections=j,l.getUnhandledReasons=function(){return oe.slice()},l.stopUnhandledRejectionTracking=function(){j(),ce=!1},j(),l.reject=_,l.fulfill=E,l.master=L,l.spread=R,h.prototype.spread=function(e,n){return this.all().then(function(n){return e.apply(void 0,n)},n)},l.async=q,l.spawn=$,l["return"]=z,l.promised=I,l.dispatch=T,h.prototype.dispatch=function(e,n){var t=this,r=p();return l.nextTick(function(){t.promiseDispatch(r.resolve,e,n)}),r.promise},l.get=function(e,n){return l(e).dispatch("get",[n])},h.prototype.get=function(e){return this.dispatch("get",[e])},l.set=function(e,n,t){return l(e).dispatch("set",[n,t])},h.prototype.set=function(e,n){return this.dispatch("set",[e,n])},l.del=l["delete"]=function(e,n){return l(e).dispatch("delete",[n])},h.prototype.del=h.prototype["delete"]=function(e){return this.dispatch("delete",[e])},l.mapply=l.post=function(e,n,t){return l(e).dispatch("post",[n,t])},h.prototype.mapply=h.prototype.post=function(e,n){return this.dispatch("post",[e,n])},l.send=l.mcall=l.invoke=function(e,n){return l(e).dispatch("post",[n,Y(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(e){return this.dispatch("post",[e,Y(arguments,1)])},l.fapply=function(e,n){return l(e).dispatch("apply",[void 0,n])},h.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},l["try"]=l.fcall=function(e){return l(e).dispatch("apply",[void 0,Y(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},l.fbind=function(e){var n=l(e),t=Y(arguments,1);return function(){return n.dispatch("apply",[this,t.concat(Y(arguments))])}},h.prototype.fbind=function(){var e=this,n=Y(arguments);return function(){return e.dispatch("apply",[this,n.concat(Y(arguments))])}},l.keys=function(e){return l(e).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},l.all=C,h.prototype.all=function(){return C(this)},l.any=N,h.prototype.any=function(){return N(this)},l.allResolved=f(P,"allResolved","allSettled"),h.prototype.allResolved=function(){return P(this)},l.allSettled=F,h.prototype.allSettled=function(){return this.then(function(e){return C(Z(e,function(e){function n(){return e.inspect()}return e=l(e),e.then(n,n)}))})},l.fail=l["catch"]=function(e,n){return l(e).then(void 0,n)},h.prototype.fail=h.prototype["catch"]=function(e){return this.then(void 0,e)},l.progress=M,h.prototype.progress=function(e){return this.then(void 0,void 0,e)},l.fin=l["finally"]=function(e,n){return l(e)["finally"](n)},h.prototype.fin=h.prototype["finally"]=function(e){return e=l(e),this.then(function(n){return e.fcall().then(function(){return n})},function(n){return e.fcall().then(function(){throw n})})},l.done=function(e,n,t,r){return l(e).done(n,t,r)},h.prototype.done=function(e,t,r){var o=function(e){l.nextTick(function(){if(i(e,u),!l.onerror)throw e;l.onerror(e)})},u=e||t||r?this.then(e,t,r):this;"object"==typeof n&&n&&n.domain&&(o=n.domain.bind(o)),u.then(void 0,o)},l.timeout=function(e,n,t){return l(e).timeout(n,t)},h.prototype.timeout=function(e,n){var t=p(),r=setTimeout(function(){n&&"string"!=typeof n||(n=new Error(n||"Timed out after "+e+" ms"),n.code="ETIMEDOUT"),t.reject(n)},e);return this.then(function(e){clearTimeout(r),t.resolve(e)},function(e){clearTimeout(r),t.reject(e)},t.notify),t.promise},l.delay=function(e,n){return void 0===n&&(n=e,e=void 0),l(e).delay(n)},h.prototype.delay=function(e){return this.then(function(n){var t=p();return setTimeout(function(){t.resolve(n)},e),t.promise})},l.nfapply=function(e,n){return l(e).nfapply(n)},h.prototype.nfapply=function(e){var n=p(),t=Y(e);return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},l.nfcall=function(e){var n=Y(arguments,1);return l(e).nfapply(n)},h.prototype.nfcall=function(){var e=Y(arguments),n=p();return e.push(n.makeNodeResolver()),this.fapply(e).fail(n.reject),n.promise},l.nfbind=l.denodeify=function(e){var n=Y(arguments,1);return function(){var t=n.concat(Y(arguments)),r=p();return t.push(r.makeNodeResolver()),l(e).fapply(t).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var e=Y(arguments);return e.unshift(this),l.denodeify.apply(void 0,e)},l.nbind=function(e,n){var t=Y(arguments,2);return function(){function r(){return e.apply(n,arguments)}var i=t.concat(Y(arguments)),o=p();return i.push(o.makeNodeResolver()),l(r).fapply(i).fail(o.reject),o.promise}},h.prototype.nbind=function(){var e=Y(arguments,0);return e.unshift(this),l.nbind.apply(void 0,e)},l.nmapply=l.npost=function(e,n,t){return l(e).npost(n,t)},h.prototype.nmapply=h.prototype.npost=function(e,n){var t=Y(n||[]),r=p();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(e,n){var t=Y(arguments,2),r=p();return t.push(r.makeNodeResolver()),l(e).dispatch("post",[n,t]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(e){var n=Y(arguments,1),t=p();return n.push(t.makeNodeResolver()),this.dispatch("post",[e,n]).fail(t.reject),t.promise},l.nodeify=U,h.prototype.nodeify=function(e){return e?void this.then(function(n){l.nextTick(function(){e(null,n)})},function(n){l.nextTick(function(){e(n)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var se=s();return l})}).call(this,n("_process"))},{_process:6}],8:[function(e,n,t){n.exports=e("./src/crossfilter").crossfilter},{"./src/crossfilter":12}],9:[function(e,n,t){n.exports={_args:[[{name:"crossfilter2",raw:"crossfilter2@^1.4.0-alpha.05",rawSpec:"^1.4.0-alpha.05",scope:null,spec:">=1.4.0-alpha.5 <2.0.0",type:"range"},"/Users/jayson/workspace/components/universe/node_modules/reductio"]],_from:"crossfilter2@>=1.4.0-alpha.5 <2.0.0",_id:"crossfilter2@1.4.0-alpha.6",_inCache:!0,_installable:!0,_location:"/reductio/crossfilter2",_nodeVersion:"5.10.1",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/crossfilter2-1.4.0-alpha.6.tgz_1463519571786_0.49269671249203384"},_npmUser:{email:"esjewett@gmail.com",name:"esjewett"},_npmVersion:"3.8.3",_phantomChildren:{},_requested:{name:"crossfilter2",raw:"crossfilter2@^1.4.0-alpha.05",rawSpec:"^1.4.0-alpha.05",scope:null,spec:">=1.4.0-alpha.5 <2.0.0",type:"range"},_requiredBy:["/reductio"],_resolved:"https://registry.npmjs.org/crossfilter2/-/crossfilter2-1.4.0-alpha.6.tgz",_shasum:"f0197c6fab2d6a583b51254bfc6357093f80521b",_shrinkwrap:null,_spec:"crossfilter2@^1.4.0-alpha.05",_where:"/Users/jayson/workspace/components/universe/node_modules/reductio",author:{name:"Mike Bostock",url:"http://bost.ocks.org/mike"},bugs:{url:"https://github.com/crossfilter/crossfilter/issues"},contributors:[{name:"Jason Davies",url:"http://www.jasondavies.com/"}],dependencies:{"lodash.result":"^4.4.0"},description:"Fast multidimensional filtering for coordinated views.",devDependencies:{browserify:"^13.0.0",d3:"3.5","package-json-versionify":"1.0.2","uglify-js":"2.4.0",vows:"0.7.0"},directories:{},dist:{shasum:"f0197c6fab2d6a583b51254bfc6357093f80521b",tarball:"https://registry.npmjs.org/crossfilter2/-/crossfilter2-1.4.0-alpha.6.tgz"},files:["src","index.js","crossfilter.js","crossfilter.min.js"],gitHead:"509a96798f5153a58d1b6cae5fb3e7893129ce7c",homepage:"http://crossfilter.github.com/crossfilter/",keywords:["analytics","visualization","crossfilter"],main:"./index.js",maintainers:[{email:"esjewett@gmail.com",name:"esjewett"},{email:"gordon@woodhull.com",name:"gordonwoodhull"},{email:"tannerlinsley@gmail.com",name:"tannerlinsley"}],name:"crossfilter2",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+ssh://git@github.com/crossfilter/crossfilter.git"},scripts:{benchmark:"node test/benchmark.js",build:"browserify index.js -t package-json-versionify --standalone crossfilter -o crossfilter.js && uglifyjs --compress --mangle --screw-ie8 crossfilter.js -o crossfilter.min.js",clean:"rm -f crossfilter.js crossfilter.min.js",test:"vows --verbose"},version:"1.4.0-alpha.6"}},{}],10:[function(e,n,t){function r(e){for(var n=new Array(e),t=-1;++t<e;)n[t]=0;return n}function i(e,n){for(var t=e.length;t<n;)e[t++]=0;return e}function o(e,n){if(n>32)throw new Error("invalid array width!");return e}function u(e){this.length=e,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=crossfilter_array8(e)}"undefined"!=typeof Uint8Array&&(crossfilter_array8=function(e){return new Uint8Array(e)},crossfilter_array16=function(e){return new Uint16Array(e)},crossfilter_array32=function(e){return new Uint32Array(e)},crossfilter_arrayLengthen=function(e,n){if(e.length>=n)return e;var t=new e.constructor(n);return t.set(e),t},crossfilter_arrayWiden=function(e,n){var t;switch(n){case 16:t=crossfilter_array16(e.length);break;case 32:t=crossfilter_array32(e.length);break;default:throw new Error("invalid array width!")}return t.set(e),t}),u.prototype.lengthen=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n)this[n]=crossfilter_arrayLengthen(this[n],e);this.length=e},u.prototype.add=function(){var e,n,t,r,i;for(r=0,i=this.subarrays;r<i;++r)if(e=this.masks[r],n=this.width-32*r,t=~e&-~e,!(n>=32)||t)return n<32&&t&1<<n&&(this[r]=crossfilter_arrayWiden(this[r],n<<=1),this.width=32*r+n),this.masks[r]|=t,{offset:r,one:t};return this[this.subarrays]=crossfilter_array8(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},u.prototype.copy=function(e,n){var t,r;for(t=0,r=this.subarrays;t<r;++t)this[t][e]=this[t][n]},u.prototype.truncate=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n){for(var r=this.length-1;r>=e;r--)this[n][r]=0;this[n].length=e}this.length=e},u.prototype.zero=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n)if(this[n][e])return!1;return!0},u.prototype.zeroExcept=function(e,n,t){var r,i;for(r=0,i=this.subarrays;r<i;++r)if(r===n?this[r][e]&t:this[r][e])return!1;return!0},u.prototype.zeroExceptMask=function(e,n){var t,r;for(t=0,r=this.subarrays;t<r;++t)if(this[t][e]&n[t])return!1;return!0},u.prototype.only=function(e,n,t){var r,i;for(r=0,i=this.subarrays;r<i;++r)if(this[r][e]!=(r===n?t:0))return!1;return!0},u.prototype.onlyExcept=function(e,n,t,r,i){var o,u,a;for(u=0,a=this.subarrays;u<a;++u)if(o=this[u][e],u===n&&(o&=t),o!=(u===r?i:0))return!1;return!0},n.exports={array8:r,array16:r,array32:r,arrayLengthen:i,arrayWiden:o,bitarray:u}},{}],11:[function(e,n,t){function r(e){function n(n,t,r,i){for(;r<i;){var o=r+i>>>1;e(n[o])<t?r=o+1:i=o}return r}function t(n,t,r,i){for(;r<i;){var o=r+i>>>1;t<e(n[o])?i=o:r=o+1}return r}return t.right=t,t.left=n,t}var i=e("./identity");n.exports=r(i),n.exports.by=r},{"./identity":16}],12:[function(e,n,t){function r(){function e(e){var n=R,t=e.length;return t&&(L=L.concat(e),E.lengthen(R+=t),$.forEach(function(r){r(e,n,t)}),_("dataAdded")),S}function n(){for(var e=o(R,R),n=[],t=0,r=0;t<R;++t)E.zero(t)?n.push(t):e[t]=r++;q.forEach(function(e){e(-1,-1,[],n,!0)}),z.forEach(function(n){n(e)});for(var t=0,r=0;t<R;++t)E.zero(t)||(t!==r&&(E.copy(r,t),L[r]=L[t]),++r);L.length=R=r,E.truncate(r),_("dataRemoved")}function t(e,n){var t,r,i,o,u=Array(E.subarrays);for(t=0;t<E.subarrays;t++)u[t]=-1;if(n)for(r=0,o=n.length;r<o;r++)i=n[r].id(),u[i>>7]&=~(1<<(63&i));return E.zeroExceptMask(e,u)}function r(e,n){function t(t,r,a){if(n){for(fe=0,b=0,k=[],i=0;i<t.length;i++)for(b=0,k=e(t[i]);b<k.length;b++)fe++;G=[],X=u(t.length),ee=o(fe,1),ne=[];var s=u(fe);for(l=0,i=0;i<t.length;i++)if(k=e(t[i]),k.length)for(X[i]=k.length,b=0;b<k.length;b++)G.push(k[b]),s[l]=i,l++;else X[i]=0,ne.push(i);var f=ie(u(fe),0,fe);G=g(G,f),Y=g(s,f)}else G=t.map(e),Y=ie(u(a),0,a),G=g(G,Y);n&&(a=fe);var p=oe(G),d=p[0],v=p[1];if(te)for(i=0;i<a;++i)te(G[i],i)||(E[V][Y[i]+r]|=B,n&&(ee[i]=1));else{for(i=0;i<d;++i)E[V][Y[i]+r]|=B,n&&(ee[i]=1);for(i=v;i<a;++i)E[V][Y[i]+r]|=B,n&&(ee[i]=1)}if(!r)return Q=G,W=Y,H=X,Z=ee,ce=d,void(se=v);var h=Q,y=W,m=Z;if(i0=0,i1=0,n&&(old_n0=r,r=h.length,a=fe),Q=n?new Array(r+a):new Array(R),W=n?new Array(r+a):o(R,R),n&&(Z=o(r+a,1)),n){var x=H.length;H=c.arrayLengthen(H,R);for(var b=0;b+x<R;b++)H[b+x]=X[b]}for(i=0;i0<r&&i1<a;++i)h[i0]<G[i1]?(Q[i]=h[i0],n&&(Z[i]=m[i0]),W[i]=y[i0++]):(Q[i]=G[i1],n&&(Z[i]=m[i1]),W[i]=Y[i1++]+(n?old_n0:r));for(;i0<r;++i0,++i)Q[i]=h[i0],n&&(Z[i]=m[i0]),W[i]=y[i0];for(;i1<a;++i1,++i)Q[i]=G[i1],n&&(Z[i]=m[i1]),W[i]=Y[i1]+(n?old_n0:r);p=oe(Q),ce=p[0],se=p[1]}function r(e,n,t){ue.forEach(function(e){e(G,Y,n,t)}),G=Y=null}function m(e){for(var n,t=0,r=0;t<R;++t)E.zero(n=W[t])||(t!==r&&(Q[r]=Q[t]),W[r]=e[n],++r);for(Q.length=r;r<R;)W[r++]=0;var i=oe(Q);ce=i[0],se=i[1]}function w(e){var t=e[0],r=e[1];if(te)return te=null,C(function(e,n){return t<=n&&n<r},0===e[0]&&e[1]===W.length),ce=t,se=r,re;var i,o,u,a=[],c=[],s=[],f=[];if(t<ce)for(i=t,o=Math.min(ce,r);i<o;++i)a.push(W[i]),s.push(i);else if(t>ce)for(i=ce,o=Math.min(t,se);i<o;++i)c.push(W[i]),f.push(i);if(r>se)for(i=Math.max(t,se),o=r;i<o;++i)a.push(W[i]),s.push(i);else if(r<se)for(i=Math.max(ce,r),o=se;i<o;++i)c.push(W[i]),f.push(i);if(n){var l=[],p=[];for(i=0;i<a.length;i++)H[a[i]]++,Z[s[i]]=0,1===H[a[i]]&&(E[V][a[i]]^=B,l.push(a[i]));for(i=0;i<c.length;i++)H[c[i]]--,Z[f[i]]=1,0===H[c[i]]&&(E[V][c[i]]^=B,p.push(c[i]));if(a=l,c=p,0===e[0]&&e[1]===W.length)for(i=0;i<ne.length;i++)E[V][u=ne[i]]&B&&(E[V][u]^=B,a.push(u));else for(i=0;i<ne.length;i++)E[V][u=ne[i]]&B||(E[V][u]^=B,c.push(u))}else{for(i=0;i<a.length;i++)E[V][a[i]]^=B;for(i=0;i<c.length;i++)E[V][c[i]]^=B}return ce=t,se=r,q.forEach(function(e){e(B,V,a,c)}),_("filtered"),re}function A(e){return null==e?I():Array.isArray(e)?S(e):"function"==typeof e?T(e):O(e)}function O(e){return w((oe=s.filterExact(y,e))(Q))}function S(e){return w((oe=s.filterRange(y,e))(Q))}function I(){return w((oe=s.filterAll)(Q))}function T(e){return te=e,oe=s.filterAll,C(e,!1),ce=0,se=R,re}function C(e,t){var r,i,o,u=[],a=[],c=[],s=[],f=W.length;if(!n)for(r=0;r<f;++r)!(E[V][i=W[r]]&B)^!!(o=e(Q[r],r))&&(o?u.push(i):a.push(i));if(n)for(r=0;r<f;++r)e(Q[r],r)?(u.push(W[r]),c.push(r)):(a.push(W[r]),s.push(r));if(n){var l=[],p=[];for(r=0;r<u.length;r++)1===Z[c[r]]&&(H[u[r]]++,Z[c[r]]=0,1===H[u[r]]&&(E[V][u[r]]^=B,l.push(u[r])));for(r=0;r<a.length;r++)0===Z[s[r]]&&(H[a[r]]--,Z[s[r]]=1,0===H[a[r]]&&(E[V][a[r]]^=B,p.push(a[r])));if(u=l,a=p,t)for(r=0;r<ne.length;r++)E[V][i=ne[r]]&B&&(E[V][i]^=B,u.push(i));else for(r=0;r<ne.length;r++)E[V][i=ne[r]]&B||(E[V][i]^=B,a.push(i))}else{for(r=0;r<u.length;r++)E[V][u[r]]&B&&(E[V][u[r]]&=K);for(r=0;r<a.length;r++)E[V][a[r]]&B||(E[V][a[r]]|=B)}q.forEach(function(e){e(B,V,u,a)}),_("filtered")}function N(e,t){var r,i=[],o=se,u=0;for(t&&t>0&&(u=t);--o>=ce&&e>0;)E.zero(r=W[o])&&(u>0?--u:(i.push(L[r]),--e));if(n)for(o=0;o<ne.length&&e>0;o++)E.zero(r=ne[o])&&(u>0?--u:(i.push(L[r]),--e));return i}function P(e,t){var r,i,o=[],u=0;if(t&&t>0&&(u=t),n)for(r=0;r<ne.length&&e>0;r++)E.zero(i=ne[r])&&(u>0?--u:(o.push(L[i]),--e));for(r=ce;r<se&&e>0;)E.zero(i=W[r])&&(u>0?--u:(o.push(L[i]),--e)),r++;return o}function F(e){function t(t,r,f,d){function v(){return n?void J++:void(++J===D&&(A=c.arrayWiden(A,U<<=1),T=c.arrayWiden(T,U),D=a(U)))}n&&(n0old=f,f=Q.length-t.length,d=t.length);var h,m,x,b,k,w,j=I,A=n?[]:o(J,D),O=P,_=F,S=M,$=J,z=0,C=0;for(H&&(O=S=p),H&&(_=S=p),I=new Array(J),J=0,T=n?$>1?T:[]:$>1?c.arrayLengthen(T,R):o(R,D),$&&(x=(m=j[0]).key);C<d&&!((b=e(t[C]))>=b);)++C;for(;C<d;){for(m&&x<=b?(k=m,w=x,A[z]=J,(m=j[++z])&&(x=m.key)):(k={key:b,value:S()},w=b),I[J]=k;b<=w&&(h=r[C]+(n?n0old:f),n?T[h]?T[h].push(J):T[h]=[J]:T[h]=J,k.value=O(k.value,L[h],!0),E.zeroExcept(h,V,K)||(k.value=_(k.value,L[h],!1)),!(++C>=d));)b=e(t[C]);v()}for(;z<$;)I[A[z]=J]=j[z++],v();if(n)for(i=0;i<R;i++)T[i]||(T[i]=[]);if(J>z)if(n)T=g(T,A,!0);else for(z=0;z<f;++z)T[z]=A[T[z]];h=q.indexOf(G),J>1?(G=u,Y=l):(!J&&X&&(J=1,I=[{key:null,value:S()}]),1===J?(G=s,Y=y):(G=p,Y=p),T=null),q[h]=G}function r(){if(J>1){for(var e=J,n=I,t=o(e,e),r=0,i=0;r<R;++r)E.zero(r)||(t[T[i]=T[r]]=1,++i);for(I=[],J=0,r=0;r<e;++r)t[r]&&(t[r]=J++,I.push(n[r]));if(J>1)for(var r=0;r<i;++r)T[r]=t[T[r]];else T=null;q[q.indexOf(G)]=J>1?(Y=l,G=u):1===J?(Y=y,G=s):Y=G=p}else if(1===J){if(X)return;for(var r=0;r<R;++r)if(!E.zero(r))return;I=[],J=0,q[q.indexOf(G)]=G=Y=p}}function u(e,t,r,i,o){if(!(e===B&&t===V||H)){var u,a,c,s,f;if(n){for(u=0,s=r.length;u<s;++u)if(E.zeroExcept(c=r[u],V,K))for(a=0;a<T[c].length;a++)f=I[T[c][a]],f.value=P(f.value,L[c],!1,a);for(u=0,s=i.length;u<s;++u)if(E.onlyExcept(c=i[u],V,K,t,e))for(a=0;a<T[c].length;a++)f=I[T[c][a]],f.value=F(f.value,L[c],o,a)}else{for(u=0,s=r.length;u<s;++u)E.zeroExcept(c=r[u],V,K)&&(f=I[T[c]],f.value=P(f.value,L[c],!1));for(u=0,s=i.length;u<s;++u)E.onlyExcept(c=i[u],V,K,t,e)&&(f=I[T[c]],f.value=F(f.value,L[c],o))}}}function s(e,n,t,r,i){if(!(e===B&&n===V||H)){var o,u,a,c=I[0];for(o=0,a=t.length;o<a;++o)E.zeroExcept(u=t[o],V,K)&&(c.value=P(c.value,L[u],!1));for(o=0,a=r.length;o<a;++o)E.onlyExcept(u=r[o],V,K,n,e)&&(c.value=F(c.value,L[u],i))}}function l(){var e,t,r;for(e=0;e<J;++e)I[e].value=M();if(n){for(e=0;e<R;++e)for(t=0;t<T[e].length;t++)r=I[T[e][t]],r.value=P(r.value,L[e],!0,t);for(e=0;e<R;++e)if(!E.zeroExcept(e,V,K))for(t=0;t<T[e].length;t++)r=I[T[e][t]],r.value=F(r.value,L[e],!1,t)}else{for(e=0;e<R;++e)r=I[T[e]],r.value=P(r.value,L[e],!0);for(e=0;e<R;++e)E.zeroExcept(e,V,K)||(r=I[T[e]],r.value=F(r.value,L[e],!1))}}function y(){var e,n=I[0];for(n.value=M(),e=0;e<R;++e)n.value=P(n.value,L[e],!0);for(e=0;e<R;++e)E.zeroExcept(e,V,K)||(n.value=F(n.value,L[e],!1))}function m(){return H&&(Y(),H=!1),I}function x(e){var n=C(m(),0,I.length,e);return N.sort(n,0,n.length)}function k(e,n,t){return P=e,F=n,M=t,H=!0,$}function w(){return k(b.reduceIncrement,b.reduceDecrement,d)}function j(e){return k(b.reduceAdd(e),b.reduceSubtract(e),d)}function A(e){function n(n){return e(n.value)}return C=v.by(n),N=h.by(n),$}function O(){return A(f)}function _(){return J}function S(){var e=q.indexOf(G);return e>=0&&q.splice(e,1),e=ue.indexOf(t),e>=0&&ue.splice(e,1),e=z.indexOf(r),e>=0&&z.splice(e,1),$}var $={top:x,all:m,reduce:k,reduceCount:w,reduceSum:j,order:A,orderNatural:O,size:_,dispose:S,remove:S};ae.push($);var I,T,C,N,P,F,M,U=8,D=a(U),J=0,G=p,Y=p,H=!0,X=e===p;return arguments.length<1&&(e=f),q.push(G),ue.push(t),z.push(r),t(Q,W,0,R),w().orderNatural()}function M(){var e=F(p),n=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return n()[0].value},e}function U(){ae.forEach(function(e){e.dispose()});var e=$.indexOf(t);return e>=0&&$.splice(e,1),e=$.indexOf(r),e>=0&&$.splice(e,1),e=z.indexOf(m),e>=0&&z.splice(e,1),E.masks[V]&=K,I()}if("string"==typeof e){var D=e;e=function(e){return j(e,D)}}var B,K,V,J,Q,W,G,Y,H,X,Z,ee,ne,te,re={filter:A,filterExact:O,filterRange:S,filterFunction:T,filterAll:I,top:N,bottom:P,group:F,groupAll:M,dispose:U,remove:U,accessor:e,id:function(){return J}},ie=x.by(function(e){return G[e]}),oe=s.filterAll,ue=[],ae=[],ce=0,se=0,fe=0;$.unshift(t),$.push(r),z.push(m);var le=E.add();return V=le.offset,B=le.one,K=~B,J=V<<7|Math.log(B)/Math.log(2),t(L,0,R),r(L,0,R),re}function m(){function e(e,n){var t;if(!v)for(t=n;t<R;++t)c=s(c,L[t],!0),E.zero(t)||(c=f(c,L[t],!1))}function n(e,n,t,r,i){var o,u,a;if(!v){for(o=0,a=t.length;o<a;++o)E.zero(u=t[o])&&(c=s(c,L[u],i));for(o=0,a=r.length;o<a;++o)E.only(u=r[o],n,e)&&(c=f(c,L[u],i))}}function t(){var e;for(c=l(),e=0;e<R;++e)c=s(c,L[e],!0),E.zero(e)||(c=f(c,L[e],!1))}function r(e,n,t){return s=e,f=n,l=t,v=!0,p}function i(){return r(b.reduceIncrement,b.reduceDecrement,d)}function o(e){return r(b.reduceAdd(e),b.reduceSubtract(e),d)}function u(){return v&&(t(),v=!1),c}function a(){var t=q.indexOf(n);return t>=0&&q.splice(t),t=$.indexOf(e),t>=0&&$.splice(t),p}var c,s,f,l,p={reduce:r,reduceCount:i,reduceSum:o,value:u,dispose:a,remove:a},v=!0;return q.push(n),$.push(e),e(L,0,R),i()}function w(){return R}function A(){return L}function O(e){return"function"!=typeof e?void console.warn("onChange callback parameter must be a function!"):(I.push(e),function(){I.splice(I.indexOf(e),1)})}function _(e){for(var n=0;n<I.length;n++)I[n](e)}var E,S={add:e,remove:n,dimension:r,groupAll:m,size:w,all:A,onChange:O,isElementFiltered:t},L=[],R=0,q=[],$=[],z=[],I=[];return E=new c.bitarray(0),arguments.length?e(arguments[0]):S}function o(e,n){return(n<257?c.array8:n<65537?c.array16:c.array32)(e)}function u(e){for(var n=o(e,e),t=-1;++t<e;)n[t]=t;return n}function a(e){return 8===e?256:16===e?65536:4294967296}var c=e("./array"),s=e("./filter"),f=e("./identity"),p=e("./null"),d=e("./zero"),v=e("./heapselect"),h=e("./heap"),y=e("./bisect"),m=e("./insertionsort"),g=e("./permute"),x=e("./quicksort"),b=e("./reduce"),w=e("./../package.json"),j=e("lodash.result");t.crossfilter=r,t.crossfilter.heap=h,t.crossfilter.heapselect=v,t.crossfilter.bisect=y,t.crossfilter.insertionsort=m,t.crossfilter.permute=g,t.crossfilter.quicksort=x,t.crossfilter.version=w.version},{"./../package.json":9,"./array":10,"./bisect":11,"./filter":13,"./heap":14,"./heapselect":15,"./identity":16,"./insertionsort":17,"./null":18,"./permute":19,"./quicksort":20,"./reduce":21,"./zero":22,"lodash.result":5}],13:[function(e,n,t){function r(e,n){return function(t){var r=t.length;return[e.left(t,n,0,r),e.right(t,n,0,r)]}}function i(e,n){var t=n[0],r=n[1];return function(n){var i=n.length;return[e.left(n,t,0,i),e.left(n,r,0,i)]}}function o(e){return[0,e.length]}n.exports={filterExact:r,filterRange:i,filterAll:o}},{}],14:[function(e,n,t){function r(e){function n(e,n,t){for(var i=t-n,o=(i>>>1)+1;--o>0;)r(e,o,i,n);return e}function t(e,n,t){for(var i,o=t-n;--o>0;)i=e[n],e[n]=e[n+o],e[n+o]=i,r(e,1,o,n);return e}function r(n,t,r,i){for(var o,u=n[--i+t],a=e(u);(o=t<<1)<=r&&(o<r&&e(n[i+o])>e(n[i+o+1])&&o++,!(a<=e(n[i+o])));)n[i+t]=n[i+o],t=o;n[i+t]=u}return n.sort=t,n}var i=e("./identity");n.exports=r(i),n.exports.by=r},{"./identity":16}],15:[function(e,n,t){function r(e){function n(n,r,i,o){var u,a,c,s,f=new Array(o=Math.min(i-r,o));for(a=0;a<o;++a)f[a]=n[r++];if(t(f,0,o),r<i){u=e(f[0]);do(c=e(s=n[r])>u)&&(f[0]=s,u=e(t(f,0,o)[0]));while(++r<i)}return f}var t=o.by(e);return n}var i=e("./identity"),o=e("./heap");n.exports=r(i),n.exports.by=r},{"./heap":14,"./identity":16}],16:[function(e,n,t){function r(e){return e}n.exports=r},{}],17:[function(e,n,t){function r(e){function n(n,t,r){for(var i=t+1;i<r;++i){for(var o=i,u=n[i],a=e(u);o>t&&e(n[o-1])>a;--o)n[o]=n[o-1];n[o]=u}return n}return n}var i=e("./identity");n.exports=r(i),n.exports.by=r},{"./identity":16}],18:[function(e,n,t){function r(){return null}n.exports=r},{}],19:[function(e,n,t){function r(e,n,t){for(var r=0,i=n.length,o=t?JSON.parse(JSON.stringify(e)):new Array(i);r<i;++r)o[r]=e[n[r]];return o}n.exports=r},{}],20:[function(e,n,t){function r(e){function n(e,n,i){return(i-n<u?r:t)(e,n,i)}function t(t,r,i){var o,u=(i-r)/6|0,a=r+u,c=i-1-u,s=r+i-1>>1,f=s-u,l=s+u,p=t[a],d=e(p),v=t[f],h=e(v),y=t[s],m=e(y),g=t[l],x=e(g),b=t[c],k=e(b);d>h&&(o=p,p=v,v=o,o=d,d=h,h=o),x>k&&(o=g,g=b,b=o,o=x,x=k,k=o),d>m&&(o=p,p=y,y=o,o=d,d=m,m=o),h>m&&(o=v,v=y,y=o,o=h,h=m,m=o),d>x&&(o=p,p=g,g=o,o=d,d=x,x=o),m>x&&(o=y,y=g,g=o,o=m,m=x,x=o),h>k&&(o=v,v=b,b=o,o=h,h=k,k=o),h>m&&(o=v,v=y,y=o,o=h,h=m,m=o),x>k&&(o=g,g=b,b=o,o=x,x=k,k=o);var w=v,j=h,A=g,O=x;t[a]=p,t[f]=t[r],t[s]=y,t[l]=t[i-1],t[c]=b;var _=r+1,E=i-2,S=j<=O&&j>=O;if(S)for(var L=_;L<=E;++L){var R=t[L],q=e(R);if(q<j)L!==_&&(t[L]=t[_],t[_]=R),++_;else if(q>j)for(;;){var $=e(t[E]);{if(!($>j)){if($<j){t[L]=t[_],t[_++]=t[E],t[E--]=R;break}t[L]=t[E],t[E--]=R;break}E--}}}else for(var L=_;L<=E;L++){var R=t[L],q=e(R);if(q<j)L!==_&&(t[L]=t[_],t[_]=R),++_;else if(q>O)for(;;){var $=e(t[E]);{if(!($>O)){$<j?(t[L]=t[_],t[_++]=t[E],t[E--]=R):(t[L]=t[E],t[E--]=R);break}if(E--,E<L)break}}}if(t[r]=t[_-1],t[_-1]=w,t[i-1]=t[E+1],t[E+1]=A,n(t,r,_-1),n(t,E+2,i),S)return t;if(_<a&&E>c){for(var z,$;(z=e(t[_]))<=j&&z>=j;)++_;for(;($=e(t[E]))<=O&&$>=O;)--E;for(var L=_;L<=E;L++){var R=t[L],q=e(R);if(q<=j&&q>=j)L!==_&&(t[L]=t[_],t[_]=R),_++;else if(q<=O&&q>=O)for(;;){var $=e(t[E]);{if(!($<=O&&$>=O)){$<j?(t[L]=t[_],t[_++]=t[E],t[E--]=R):(t[L]=t[E],t[E--]=R);break}if(E--,E<L)break}}}}return n(t,_,E+1)}var r=o.by(e);return n}var i=e("./identity"),o=e("./insertionsort"),u=32;n.exports=r(i),n.exports.by=r},{"./identity":16,"./insertionsort":17}],21:[function(e,n,t){function r(e){return e+1}function i(e){return e-1}function o(e){return function(n,t){return n+ +e(t)}}function u(e){return function(n,t){return n-e(t)}}n.exports={reduceIncrement:r,reduceDecrement:i,reduceAdd:o,reduceSubtract:u}},{}],22:[function(e,n,t){function r(){return 0}n.exports=r},{}],23:[function(e,n,t){function r(e,n){function t(e){if("string"==typeof e){var n=e,t=function(e){return e[n]};return t}return e}function o(e){if("string"==typeof e){var n=e,t=function(e){return+e[n]};return t}return e}e.fromObject=function(t){return arguments.length?(_assign(n,t),e):n},e.toObject=function(){return n},e.count=function(t,r){return arguments.length?(r||(r="count"),n.count=r,e):n.count},e.sum=function(t){return arguments.length?(t=o(t),n.sum=t,e):n.sum},e.avg=function(t){return arguments.length?(t=o(t),"function"==typeof t?(n.sum&&console.warn("SUM aggregation is being overwritten by AVG aggregation"),n.sum=t,n.avg=!0,n.count="count"):n.avg=t,e):n.avg},e.exception=function(r){return arguments.length?(r=t(r),n.exceptionAccessor=r,e):n.exceptionAccessor},e.filter=function(t){return arguments.length?(n.filter=t,e):n.filter},e.valueList=function(r){return arguments.length?(r=t(r),n.valueList=r,e):n.valueList},e.median=function(t){return arguments.length?(t=o(t),"function"==typeof t&&(n.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),n.valueList=t),n.median=t,e):n.median},e.min=function(t){return arguments.length?(t=o(t),"function"==typeof t&&(n.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),n.valueList=t),n.min=t,e):n.min},e.max=function(t){return arguments.length?(t=o(t),"function"==typeof t&&(n.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),n.valueList=t),n.max=t,e):n.max},e.exceptionCount=function(r){return arguments.length?(r=t(r),"function"==typeof r?(n.sum&&console.warn("EXCEPTION accessor is being overwritten by exception count aggregation"),n.exceptionAccessor=r,n.exceptionCount=!0):n.exceptionCount=r,e):n.exceptionCount},e.exceptionSum=function(t){return arguments.length?(t=o(t),n.exceptionSum=t,e):n.exceptionSum},e.histogramValue=function(t){return arguments.length?(t=o(t),n.histogramValue=t,e):n.histogramValue},e.histogramBins=function(t){return arguments.length?(n.histogramThresholds=t,e):n.histogramThresholds},e.std=function(t){return arguments.length?(t=o(t),"function"==typeof t?(n.sumOfSquares=t,n.sum=t,n.count="count",n.std=!0):n.std=t,e):n.std},e.sumOfSq=function(t){return arguments.length?(t=o(t),n.sumOfSquares=t,e):n.sumOfSquares},e.value=function(e,t){return arguments.length&&"string"==typeof e?(n.values||(n.values={}),n.values[e]={},n.values[e].parameters=i(),r(n.values[e],n.values[e].parameters),t&&(n.values[e].accessor=t),n.values[e]):void console.error("'value' requires a string argument.")},e.nest=function(r){return arguments.length?(r.map(t),n.nestKeys=r,e):n.nestKeys},e.alias=function(t){return arguments.length?(n.aliasKeys=t,e):n.aliasKeys},e.aliasProp=function(t){return arguments.length?(n.aliasPropKeys=t,e):n.aliasPropKeys},e.groupAll=function(t){return arguments.length?(n.groupAll=t,e):n.groupAll},e.dataList=function(t){return arguments.length?(n.dataList=t,e):n.dataList},e.custom=function(t){return arguments.length?(n.custom=t,e):n.custom}}var i=e("./parameters.js");_assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),t=1;t<arguments.length;++t){var r=arguments[t];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])}return n};var o={build:r};n.exports=o},{"./parameters.js":40}],24:[function(e,n,t){var r={initial:function(e,n,t){return function(r){function i(e){return function(){return t[e](n(r))}}e&&(r=e(r));for(var o in t)n(r)[o]=i(o);return r}}};n.exports=r},{}],25:[function(e,n,t){var r={add:function(e,n,t){return function(r,i,o){n&&n(r,i,o);for(var u in e)t(r)[u]=e[u](t(r),i);return r}}};n.exports=r},{}],26:[function(e,n,t){var r={add:function(e,n,t){return function(e,r,i){return n&&n(e,r,i),t(e).count>0?t(e).avg=t(e).sum/t(e).count:t(e).avg=0,e}},remove:function(e,n,t){return function(e,r,i){return n&&n(e,r,i),t(e).count>0?t(e).avg=t(e).sum/t(e).count:t(e).avg=0,e}},initial:function(e,n){return function(t){return t=e(t),n(t).avg=0,t}}};n.exports=r},{}],27:[function(e,n,t){function r(e,n,t){t||(t=function(e){return e});var j={reduceAdd:n.reduceAdd,reduceRemove:n.reduceRemove,reduceInitial:n.reduceInitial};(e.count||e.std)&&(n.reduceAdd=o.add(n.reduceAdd,t,e.count),n.reduceRemove=o.remove(n.reduceRemove,t,e.count),n.reduceInitial=o.initial(n.reduceInitial,t,e.count)),e.sum&&(n.reduceAdd=u.add(e.sum,n.reduceAdd,t),n.reduceRemove=u.remove(e.sum,n.reduceRemove,t),n.reduceInitial=u.initial(n.reduceInitial,t)),e.avg&&(e.count&&e.sum?(n.reduceAdd=a.add(e.sum,n.reduceAdd,t),n.reduceRemove=a.remove(e.sum,n.reduceRemove,t),n.reduceInitial=a.initial(n.reduceInitial,t)):console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true).")),e.exceptionCount&&(e.exceptionAccessor?(n.reduceAdd=d.add(e.exceptionAccessor,n.reduceAdd,t),n.reduceRemove=d.remove(e.exceptionAccessor,n.reduceRemove,t),n.reduceInitial=d.initial(n.reduceInitial,t)):console.error("You must define an .exception(accessor) to use .exceptionCount(true).")),e.exceptionSum&&(e.exceptionAccessor?(n.reduceAdd=v.add(e.exceptionAccessor,e.exceptionSum,n.reduceAdd,t),n.reduceRemove=v.remove(e.exceptionAccessor,e.exceptionSum,n.reduceRemove,t),n.reduceInitial=v.initial(n.reduceInitial,t)):console.error("You must define an .exception(accessor) to use .exceptionSum(accessor).")),(e.valueList||e.median||e.min||e.max)&&(n.reduceAdd=p.add(e.valueList,n.reduceAdd,t),n.reduceRemove=p.remove(e.valueList,n.reduceRemove,t),n.reduceInitial=p.initial(n.reduceInitial,t)),e.dataList&&(n.reduceAdd=k.add(e.dataList,n.reduceAdd,t),n.reduceRemove=k.remove(e.dataList,n.reduceRemove,t),n.reduceInitial=k.initial(n.reduceInitial,t)),e.median&&(n.reduceAdd=c.add(n.reduceAdd,t),n.reduceRemove=c.remove(n.reduceRemove,t),n.reduceInitial=c.initial(n.reduceInitial,t)),e.min&&(n.reduceAdd=s.add(n.reduceAdd,t),n.reduceRemove=s.remove(n.reduceRemove,t),n.reduceInitial=s.initial(n.reduceInitial,t)),e.max&&(n.reduceAdd=f.add(n.reduceAdd,t),n.reduceRemove=f.remove(n.reduceRemove,t),n.reduceInitial=f.initial(n.reduceInitial,t)),e.exceptionAccessor&&(n.reduceAdd=l.add(e.exceptionAccessor,n.reduceAdd,t),n.reduceRemove=l.remove(e.exceptionAccessor,n.reduceRemove,t),n.reduceInitial=l.initial(n.reduceInitial,t)),e.histogramValue&&e.histogramThresholds&&(n.reduceAdd=h.add(e.histogramValue,n.reduceAdd,t),n.reduceRemove=h.remove(e.histogramValue,n.reduceRemove,t),n.reduceInitial=h.initial(e.histogramThresholds,n.reduceInitial,t)),e.sumOfSquares&&(n.reduceAdd=y.add(e.sumOfSquares,n.reduceAdd,t),n.reduceRemove=y.remove(e.sumOfSquares,n.reduceRemove,t),n.reduceInitial=y.initial(n.reduceInitial,t)),e.std&&(e.sumOfSquares&&e.sum?(n.reduceAdd=m.add(n.reduceAdd,t),n.reduceRemove=m.remove(n.reduceRemove,t),n.reduceInitial=m.initial(n.reduceInitial,t)):console.error("You must set .sumOfSq(accessor) and define a .sum(accessor) to use .std(true). Or use .std(accessor).")),e.custom&&(n.reduceAdd=w.add(n.reduceAdd,t,e.custom.add),n.reduceRemove=w.remove(n.reduceRemove,t,e.custom.remove),n.reduceInitial=w.initial(n.reduceInitial,t,e.custom.initial)),e.nestKeys&&(n.reduceAdd=g.add(e.nestKeys,n.reduceAdd,t),n.reduceRemove=g.remove(e.nestKeys,n.reduceRemove,t),n.reduceInitial=g.initial(n.reduceInitial,t)),e.aliasKeys&&(n.reduceInitial=x.initial(n.reduceInitial,t,e.aliasKeys)),e.aliasPropKeys&&(n.reduceAdd=b.add(e.aliasPropKeys,n.reduceAdd,t),
n.reduceRemove=b.add(e.aliasPropKeys,n.reduceRemove,t)),e.filter&&(n.reduceAdd=i.add(e.filter,n.reduceAdd,j.reduceAdd,t),n.reduceRemove=i.remove(e.filter,n.reduceRemove,j.reduceRemove,t)),e.values&&Object.getOwnPropertyNames(e.values).forEach(function(i){var o=function(e){return function(n){return n=e(n),t(n)[i]={},n}};n.reduceInitial=o(n.reduceInitial),r(e.values[i].parameters,n,function(e){return e[i]})})}var i=e("./filter.js"),o=e("./count.js"),u=e("./sum.js"),a=e("./avg.js"),c=e("./median.js"),s=e("./min.js"),f=e("./max.js"),l=e("./value-count.js"),p=e("./value-list.js"),d=e("./exception-count.js"),v=e("./exception-sum.js"),h=e("./histogram.js"),y=e("./sum-of-squares.js"),m=e("./std.js"),g=e("./nest.js"),x=e("./alias.js"),b=e("./aliasProp.js"),k=e("./data-list.js"),w=e("./custom.js"),j={build:r};n.exports=j},{"./alias.js":24,"./aliasProp.js":25,"./avg.js":26,"./count.js":29,"./custom.js":30,"./data-list.js":31,"./exception-count.js":32,"./exception-sum.js":33,"./filter.js":34,"./histogram.js":35,"./max.js":36,"./median.js":37,"./min.js":38,"./nest.js":39,"./std.js":45,"./sum-of-squares.js":46,"./sum.js":47,"./value-count.js":48,"./value-list.js":49}],28:[function(e,n,t){var r=function(e){return function(n){return n[e]}};_grouper=function(e,n){return e||(e=function(e){return e}),function(t,r){n&&n(t,r);var i=e(t),o=e(r);return"undefined"!=typeof o.count&&(i.count+=o.count),"undefined"!=typeof o.sum&&(i.sum+=o.sum),"undefined"!=typeof o.avg&&(i.avg=i.sum/i.count),t}},reductio_cap=function(e,n,t){var i=(n.reduceInitial(),t.values?Object.keys(t.values):[]),o=_grouper();if(i.length)for(var u=0;u<i.length;++u)o=_grouper(r(i[u]),o);return function(t,r){if(!arguments.length)return e();if(t===1/0||!t)return e();var i=e(),u=t-1;if(i.length<=t)return i;var a=i.slice(0,u),c={key:r||"Others"};c.value=n.reduceInitial();for(var s=u;s<i.length;++s)o(c.value,i[s].value);return a.push(c),a}},n.exports=reductio_cap},{}],29:[function(e,n,t){var r={add:function(e,n,t){return function(r,i,o){return e&&e(r,i,o),n(r)[t]++,r}},remove:function(e,n,t){return function(r,i,o){return e&&e(r,i,o),n(r)[t]--,r}},initial:function(e,n,t){return function(r){return e&&(r=e(r)),n(r)[t]=0,r}}};n.exports=r},{}],30:[function(e,n,t){var r={add:function(e,n,t){return function(n,r,i){return e&&e(n,r,i),t(n,r)}},remove:function(e,n,t){return function(n,r,i){return e&&e(n,r,i),t(n,r)}},initial:function(e,n,t){return function(n){return e&&(n=e(n)),t(n)}}};n.exports=r},{}],31:[function(e,n,t){var r={add:function(e,n,t){return function(e,r,i){return n&&n(e,r,i),t(e).dataList.push(r),e}},remove:function(e,n,t){return function(e,r,i){return n&&n(e,r,i),t(e).dataList.splice(t(e).dataList.indexOf(r),1),e}},initial:function(e,n){return function(t){return e&&(t=e(t)),n(t).dataList=[],t}}};n.exports=r},{}],32:[function(e,n,t){var r={add:function(e,n,t){var r,i;return function(o,u,a){return n&&n(o,u,a),r=t(o).bisect(t(o).values,e(u),0,t(o).values.length),i=t(o).values[r],i&&i[0]===e(u)&&0!==i[1]||t(o).exceptionCount++,o}},remove:function(e,n,t){var r,i;return function(o,u,a){return n&&n(o,u,a),r=t(o).bisect(t(o).values,e(u),0,t(o).values.length),i=t(o).values[r],i&&i[0]===e(u)&&1===i[1]&&t(o).exceptionCount--,o}},initial:function(e,n){return function(t){return t=e(t),n(t).exceptionCount=0,t}}};n.exports=r},{}],33:[function(e,n,t){var r={add:function(e,n,t,r){var i,o;return function(u,a,c){return t&&t(u,a,c),i=r(u).bisect(r(u).values,e(a),0,r(u).values.length),o=r(u).values[i],o&&o[0]===e(a)&&0!==o[1]||(r(u).exceptionSum=r(u).exceptionSum+n(a)),u}},remove:function(e,n,t,r){var i,o;return function(u,a,c){return t&&t(u,a,c),i=r(u).bisect(r(u).values,e(a),0,r(u).values.length),o=r(u).values[i],o&&o[0]===e(a)&&1===o[1]&&(r(u).exceptionSum=r(u).exceptionSum-n(a)),u}},initial:function(e,n){return function(t){return t=e(t),n(t).exceptionSum=0,t}}};n.exports=r},{}],34:[function(e,n,t){var r={add:function(e,n,t){return function(r,i,o){return e(i,o)?n&&n(r,i,o):t&&t(r,i,o),r}},remove:function(e,n,t){return function(r,i,o){return e(i,o)?n&&n(r,i,o):t&&t(r,i,o),r}}};n.exports=r},{}],35:[function(e,n,t){var r=e("crossfilter2"),i={add:function(e,n,t){var i,o=r.bisect.by(function(e){return e}).left,u=r.bisect.by(function(e){return e.x}).right;return function(r,a,c){return n&&n(r,a,c),i=t(r).histogram[u(t(r).histogram,e(a),0,t(r).histogram.length)-1],i.y++,i.splice(o(i,e(a),0,i.length),0,e(a)),r}},remove:function(e,n,t){var i,o=r.bisect.by(function(e){return e}).left,u=r.bisect.by(function(e){return e.x}).right;return function(r,a,c){return n&&n(r,a,c),i=t(r).histogram[u(t(r).histogram,e(a),0,t(r).histogram.length)-1],i.y--,i.splice(o(i,e(a),0,i.length),1),r}},initial:function(e,n,t){return function(r){r=n(r),t(r).histogram=[];for(var i=[],o=1;o<e.length;o++)i=[],i.x=e[o-1],i.dx=e[o]-e[o-1],i.y=0,t(r).histogram.push(i);return r}}};n.exports=i},{crossfilter2:8}],36:[function(e,n,t){var r={add:function(e,n){return function(t,r,i){return e&&e(t,r,i),n(t).max=n(t).valueList[n(t).valueList.length-1],t}},remove:function(e,n){return function(t,r,i){return e&&e(t,r,i),0===n(t).valueList.length?(n(t).max=void 0,t):(n(t).max=n(t).valueList[n(t).valueList.length-1],t)}},initial:function(e,n){return function(t){return t=e(t),n(t).max=void 0,t}}};n.exports=r},{}],37:[function(e,n,t){var r={add:function(e,n){var t;return function(r,i,o){return e&&e(r,i,o),t=Math.floor(n(r).valueList.length/2),n(r).valueList.length%2?n(r).median=n(r).valueList[t]:n(r).median=(n(r).valueList[t-1]+n(r).valueList[t])/2,r}},remove:function(e,n){var t;return function(r,i,o){return e&&e(r,i,o),t=Math.floor(n(r).valueList.length/2),0===n(r).valueList.length?(n(r).median=void 0,r):(1===n(r).valueList.length||n(r).valueList.length%2?n(r).median=n(r).valueList[t]:n(r).median=(n(r).valueList[t-1]+n(r).valueList[t])/2,r)}},initial:function(e,n){return function(t){return t=e(t),n(t).median=void 0,t}}};n.exports=r},{}],38:[function(e,n,t){var r={add:function(e,n){return function(t,r,i){return e&&e(t,r,i),n(t).min=n(t).valueList[0],t}},remove:function(e,n){return function(t,r,i){return e&&e(t,r,i),0===n(t).valueList.length?(n(t).min=void 0,t):(n(t).min=n(t).valueList[0],t)}},initial:function(e,n){return function(t){return t=e(t),n(t).min=void 0,t}}};n.exports=r},{}],39:[function(e,n,t){var r=(e("crossfilter2"),{add:function(e,n,t){var r,i;return function(o,u,a){return n&&n(o,u,a),r=t(o).nest,e.forEach(function(e){i=r.filter(function(n){return n.key===e(u)})[0],i?r=i.values:(i=[],r.push({key:e(u),values:i}),r=i)}),r.push(u),o}},remove:function(e,n,t){var r;return function(i,o,u){return n&&n(i,o,u),r=t(i).nest,e.forEach(function(e){r=r.filter(function(n){return n.key===e(o)})[0].values}),r.splice(r.indexOf(o),1),i}},initial:function(e,n){return function(t){return t=e(t),n(t).nest=[],t}}});n.exports=r},{crossfilter2:8}],40:[function(e,n,t){var r=function(){return{order:!1,avg:!1,count:!1,sum:!1,exceptionAccessor:!1,exceptionCount:!1,exceptionSum:!1,filter:!1,valueList:!1,median:!1,histogramValue:!1,min:!1,max:!1,histogramThresholds:!1,std:!1,sumOfSquares:!1,values:!1,nestKeys:!1,aliasKeys:!1,aliasPropKeys:!1,groupAll:!1,dataList:!1,custom:!1}};n.exports=r},{}],41:[function(e,n,t){function r(e){return function(n,t,r){n.post=function(){var i=function(){return i.all()};i.all=function(){return n.all()};var o=e.postprocessors;return Object.keys(o).forEach(function(e){i[e]=function(){var n=i.all,u=[].slice.call(arguments);return i.all=function(){return o[e](n,r,t).apply(null,u)},i}}),i}}}n.exports=r},{}],42:[function(e,n,t){n.exports=function(n){n.postprocessors={},n.registerPostProcessor=function(e,t){n.postprocessors[e]=t},n.registerPostProcessor("cap",e("./cap")),n.registerPostProcessor("sortBy",e("./sortBy"))}},{"./cap":28,"./sortBy":44}],43:[function(e,n,t){function r(){function e(e){if(t={reduceAdd:function(e){return e},reduceRemove:function(e){return e},reduceInitial:function(){return{}}},i.build(n,t),n.groupAll)if(e.top)console.warn("'groupAll' is defined but attempting to run on a standard dimension.group(). Must run on dimension.groupAll().");else{var r,o,u,s,f,l=c.bisect.by(function(e){return e.key}).left;e.reduce(function(e,i,a){for(u=n.groupAll(i),s=u.length,o=0;o<s;o++)f=u[o],r=l(e,f,0,e.length),e[r]&&e[r].key===f||e.splice(r,0,{key:f,value:t.reduceInitial()}),t.reduceAdd(e[r].value,i,a);return e},function(e,i,a){for(u=n.groupAll(i),s=u.length,o=0;o<s;o++)r=l(e,u[o],0,e.length),t.reduceRemove(e[r].value,i,a);return e},function(){return[]}),e.all||(e.all=function(){return this.value()})}else e.reduce(t.reduceAdd,t.reduceRemove,t.reduceInitial);return a(e,n,t),e}var n=u(),t={};return o.build(e,n),e}var i=e("./build.js"),o=e("./accessors.js"),u=e("./parameters.js"),a=e("./postprocess"),c=e("crossfilter2");e("./postprocessors")(r),a=a(r),n.exports=r},{"./accessors.js":23,"./build.js":27,"./parameters.js":40,"./postprocess":41,"./postprocessors":42,crossfilter2:8}],44:[function(e,n,t){function r(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}var i=function(e){if("function"==typeof e)return e;if(~e.indexOf(".")){var n=e.split(".");return function(e){return n.reduce(function(e,n){return e[n]},e)}}return function(n){return n[e]}},o=function(e,n){return function(t,r){return n(e(t),e(r))}};({}).toString;n.exports=function(e){return function(n,t){return 1===arguments.length&&(t=r),e().sort(o(i(n),t))}}},{}],45:[function(e,n,t){var r={add:function(e,n){return function(t,r,i){if(e&&e(t,r,i),n(t).count>0){n(t).std=0;var o=n(t).sumOfSq-n(t).sum*n(t).sum/n(t).count;o>0&&(n(t).std=Math.sqrt(o/(n(t).count-1)))}else n(t).std=0;return t}},remove:function(e,n){return function(t,r,i){if(e&&e(t,r,i),n(t).count>0){n(t).std=0;var o=n(t).sumOfSq-n(t).sum*n(t).sum/n(t).count;o>0&&(n(t).std=Math.sqrt(o/(n(t).count-1)))}else n(t).std=0;return t}},initial:function(e,n){return function(t){return t=e(t),n(t).std=0,t}}};n.exports=r},{}],46:[function(e,n,t){var r={add:function(e,n,t){return function(r,i,o){return n&&n(r,i,o),t(r).sumOfSq=t(r).sumOfSq+e(i)*e(i),r}},remove:function(e,n,t){return function(r,i,o){return n&&n(r,i,o),t(r).sumOfSq=t(r).sumOfSq-e(i)*e(i),r}},initial:function(e,n){return function(t){return t=e(t),n(t).sumOfSq=0,t}}};n.exports=r},{}],47:[function(e,n,t){var r={add:function(e,n,t){return function(r,i,o){return n&&n(r,i,o),t(r).sum=t(r).sum+e(i),r}},remove:function(e,n,t){return function(r,i,o){return n&&n(r,i,o),t(r).sum=t(r).sum-e(i),r}},initial:function(e,n){return function(t){return t=e(t),n(t).sum=0,t}}};n.exports=r},{}],48:[function(e,n,t){var r=e("crossfilter2"),i={add:function(e,n,t){var r,i;return function(o,u,a){return n&&n(o,u,a),r=t(o).bisect(t(o).values,e(u),0,t(o).values.length),i=t(o).values[r],i&&i[0]===e(u)?i[1]++:t(o).values.splice(r,0,[e(u),1]),o}},remove:function(e,n,t){var r;return function(i,o,u){return n&&n(i,o,u),r=t(i).bisect(t(i).values,e(o),0,t(i).values.length),t(i).values[r][1]--,i}},initial:function(e,n){return function(t){return t=e(t),n(t).values=[],n(t).bisect=r.bisect.by(function(e){return e[0]}).left,t}}};n.exports=i},{crossfilter2:8}],49:[function(e,n,t){var r=e("crossfilter2"),i={add:function(e,n,t){var i,o=r.bisect.by(function(e){return e}).left;return function(r,u,a){return n&&n(r,u,a),i=o(t(r).valueList,e(u),0,t(r).valueList.length),t(r).valueList.splice(i,0,e(u)),r}},remove:function(e,n,t){var i,o=r.bisect.by(function(e){return e}).left;return function(r,u,a){return n&&n(r,u,a),i=o(t(r).valueList,e(u),0,t(r).valueList.length),t(r).valueList.splice(i,1),r}},initial:function(e,n){return function(t){return t=e(t),n(t).valueList=[],t}}};n.exports=i},{crossfilter2:8}],50:[function(e,n,t){"use strict";function r(e){function n(){var n=i(e);return function(e){return n(e)}}if("string"==typeof e){if(!u(e))return e;e=c(e)}return"number"==typeof e?e:b.isObject(e)?n():void 0}function i(e){if(e=b.isObject(e)?o(e):e,b.isString(e))return u(e)?i(c(e)):function(n){return n[e]};if(b.isArray(e)){var n=b.map(e,i);return function(e){return n.map(function(n){return n(e)})}}if(e.key){if(k[e.key]){var t=i(e.value);return function(n){return k[e.key](t(n))}}console.error("Could not find aggregration method",e)}return[]}function o(e){var n,t=[];for(var r in e)if({}.hasOwnProperty.call(e,r)){n={key:r,value:e[r]};var i={};i[r]=e[r],t.push(i)}return t.length>1?t:n}function u(e){return["$","("].indexOf(e.charAt(0))>-1}function a(e){var n=[],t=e.indexOf("("),r=e.indexOf(")"),i=t>-1?e.substring(0,t):e;return!!k[i]&&(t>-1&&r>-1&&r>t&&(n=e.substring(t+1,r).split(",")),{aggregator:k[i],params:n})}function c(e){function n(e){return e=e.replace(" ",""),'"'+e.replace(t,function(e,t){if(r.test(t))return"$"===t.charAt(0)?'":{"'+t.replace(r,function(e){return","===e?',"':n(e).trim()})+"}":':["'+t.replace(r,function(){return'","'})+'"]'})}var t=/\((.+)\)/g,r=/(?:\([^\(\)]*\))|(,)/g;return JSON.parse("{"+n(e)+"}")}function s(e){return e.reduce(function(e,n){return e+n},0)}function f(e){return e.reduce(function(e,n){return e+n},0)/e.length}function l(e){return Math.max.apply(null,e)}function p(e){return Math.min.apply(null,e)}function d(e){return e.length}function v(e){return e[0]}function h(e){return e[e.length-1]}function y(e,n){return e[n]}function m(e,n){return e[e.length-n]}function g(e,n){return e[Math.round(e.length*(n/100))]}function x(e,n){return e.map(function(e){return e[n]})}var b=e("./lodash"),k={$sum:s,$avg:f,$max:l,$min:p,$count:d,$first:v,$last:h,$get:y,$nth:y,$nthLast:m,$nthPct:g,$map:x};n.exports={makeValueAccessor:r,aggregators:k,extractKeyValOrArray:o,parseAggregatorParams:a}},{"./lodash":58}],51:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash");n.exports=function(e){return function(n){function t(n){var t=[];n.removeListeners&&(t=i.map(n.removeListeners,function(e){return r.resolve(e())}));var o=n.complex?JSON.stringify(n.key):n.key;return delete e.filters[o],n.dimension&&t.push(r.resolve(n.dimension.dispose())),r.all(t)}return n&&(n=i.isArray(n)?n:[n]),n?r.all(i.map(n,function(n){i.isObject(n)&&(n=n.key);var r=i.remove(e.columns,function(e){return i.isArray(n)?!i.xor(e.key,n).length:e.key===n?!e.dynamicReference:void 0})[0];r&&t(r)})).then(function(){return e}):r.all(i.map(e.columns,t)).then(function(){return e.columns=[],e})}}},{"./lodash":58,q:7}],52:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash");n.exports=function(n){function t(e){return i.isUndefined(e)&&(e=!0),i.isArray(e)||(e=[e]),r.all(i.map(e,a)).then(function(){return n})}function o(e){return i.find(n.columns,function(n){return i.isArray(e)?!i.xor(n.key,e).length:n.key===e})}function u(e){return i.isNumber(e)?"number":i.isBoolean(e)?"bool":i.isArray(e)?"array":i.isObject(e)?"object":"string"}function a(e){var t=i.isObject(e)?e:{key:e},a=o(t.key);return a?(a.temporary=!1,a.dynamicReference&&(a.dynamicReference=!1),a.promise.then(function(){return n})):(t.queries=[],n.columns.push(t),t.promise=r["try"](function(){return r.resolve(n.cf.all())}).then(function(e){var n;if(i.isArray(t.key)){if(t.complex=!0,n=i.values(i.pick(e[0],t.key)),n.length!==t.key.length)throw new Error("Column key does not exist in data!",t.key)}else n=e[0][t.key];if(!t.complex&&t.key!==!0&&"undefined"==typeof n)throw new Error("Column key does not exist in data!",t.key);return t.type=t.key===!0?"all":t.complex?"complex":t.array?"array":u(n),c.make(t.key,t.type)}).then(function(e){function o(e){if(t.key===!0)return r.resolve();var n=c.makeAccessor(t.key);return t.values=t.values||[],r["try"](function(){return e&&e.added?r.resolve(e.added):r.resolve(t.dimension.bottom(1/0))}).then(function(e){var r;r="complex"===t.type?i.flatten(i.map(e,n)):"array"===t.type?i.flatten(i.map(e,n)):i.map(e,n),t.values=i.uniq(t.values.concat(r))})}t.dimension=e,t.filterCount=0;var u=n.onDataChange(o);return t.removeListeners=[u],o()}),t.promise.then(function(){return n}))}var c=e("./dimension")(n),s=t;return s.find=o,s}},{"./dimension":55,"./lodash":58,q:7}],53:[function(e,n,t){"use strict";var r=e("q"),i=e("crossfilter2"),o=e("./lodash");n.exports=function(e){function n(e){return o.isArray(e)?r.resolve(i(e)):e&&"function"==typeof e.dimension?r.resolve(e):r.reject(new Error("No Crossfilter data or instance found!"))}function t(n){return e.options.generatedColumns?o.map(n,function(n){return o.forEach(e.options.generatedColumns,function(e,t){n[t]=e(n)}),n}):n}function u(n){return n=t(n),r["try"](function(){return r.resolve(e.cf.add(n))}).then(function(){return r.serial(o.map(e.dataListeners,function(e){return function(){return e({added:n})}}))}).then(function(){return e})}function a(){return r["try"](function(){return r.resolve(e.cf.remove())}).then(function(){return e})}return{build:n,generateColumns:t,add:u,remove:a}}},{"./lodash":58,crossfilter2:2,q:7}],54:[function(e,n,t){"use strict";var r=e("q");n.exports=function(e){return function(){return e.clear().then(function(){return e.cf.dataListeners=[],e.cf.filterListeners=[],r.resolve(e.cf.remove())}).then(function(){return e})}}},{q:7}],55:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash");n.exports=function(e){function n(n,i){var o=t(n);return r.resolve(e.cf.dimension(o,"array"===i))}function t(e){var n;if(i.isArray(e)){var t=i.map(e,function(e){return"d['"+e+"']"});n=new Function("d",String("return "+JSON.stringify(t).replace(/"/g,"")))}else n=e===!0?function(e,n){return n}:function(n){return n[e]};return n}return{make:n,makeAccessor:t}}},{"./lodash":58,q:7}],56:[function(e,n,t){"use strict";function r(e,n){return e[n]}function i(e,n){n=n(e);for(var t=0;t<n.length;t++)if(!n[t])return!1;return!0}function o(e,n){n=n(e);for(var t=0;t<n.length;t++)if(n[t])return!0;return!1}function u(e,n){n=n(e);for(var t=0;t<n.length;t++)if(n[t])return!1;return!0}function a(e,n){return e===n()}function c(e,n){return e>n()}function s(e,n){return e>=n()}function f(e,n){return e<n()}function l(e,n){return e<=n()}function p(e,n){return e!==n()}function d(e,n){return typeof e===n()}function v(e,n){return e.indexOf(n())>-1}function h(e,n){return e.indexOf(n())===-1}function y(e,n){return n().indexOf(e)>-1}function m(e,n){return n().indexOf(e)===-1}function g(e,n){return e.length===n()}n.exports={$field:r,$and:i,$or:o,$not:u,$eq:a,$gt:c,$gte:s,$lt:f,$lte:l,$ne:p,$type:d,$in:v,$nin:h,$contains:y,$excludes:m,$size:g}},{}],57:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash"),o=e("./expressions"),u=e("./aggregation");n.exports=function(e){function n(n,t,o,u){var s=e.column.find(n);return r["try"](function(){return s?s:e.column({key:n,temporary:!0}).then(function(){return e.column.find(n)})}).then(function(n){var r=i.assign({},e.filters),s=n.complex?JSON.stringify(n.key):n.key;return r[s]=a(t,o,u),c(r)})}function t(){return e.columns.forEach(function(e){e.dimension.filterAll()}),c({})}function a(e,n,t){return!i.isUndefined(e)&&(i.isFunction(e)?{value:e,"function":e,replace:!0,type:"function"}:i.isObject(e)?{value:e,"function":p(e),replace:!0,type:"function"}:i.isArray(e)?{value:e,replace:n||t,type:n?"range":"inclusive"}:{value:e,replace:t,type:"exact"})}function c(n){var t=i.map(n,function(t,i){var o=e.filters[i];if(t===o)return r.resolve();var u;return u="["===i.charAt(0)?e.column.find(JSON.parse(i)):e.column.find(i),t&&o&&!t.replace&&(n[i]=t=s(t,o)),t?"exact"===t.type?r.resolve(u.dimension.filterExact(t.value)):"range"===t.type?r.resolve(u.dimension.filterRange(t.value)):"inclusive"===t.type?r.resolve(u.dimension.filterFunction(function(e){return t.value.indexOf(e)>-1})):"function"===t.type?r.resolve(u.dimension.filterFunction(t["function"])):r.resolve(u.dimension.filterAll()):r.resolve(u.dimension.filterAll())});return r.all(t).then(function(){e.filters=n;var t=[];return i.forEach(e.filters,function(n,r){n||(t.push({key:r,val:n}),delete e.filters[r])}),r.all(i.map(t,function(n){var t=e.column.find("["===n.key.charAt(0)?JSON.parse(n.key):n.key);if(t.temporary&&!t.dynamicReference)return e.clear(t.key)}))}).then(function(){return r.all(i.map(e.filterListeners,function(e){return e()}))}).then(function(){return e})}function s(e,n){if("exact"===e.type&&"inclusive"===n.type)e.value=i.xor([e.value],n.value);else if("inclusive"===e.type&&"exact"===n.type)e.value=i.xor(e.value,[n.value]);else if("inclusive"===e.type&&"inclusive"===n.type)e.value=i.xor(e.value,n.value);else if("exact"===e.type&&"exact"===n.type){if(e.value===n.value)return!1;e.value=[e.value,n.value]}return e.value.length?1===e.value.length?(e.type="exact",e.value=e.value[0]):e.type="inclusive":e=!1,e}function f(e){function n(e){i.forEach(e,function(e,r){var o=l(e,r);o&&t.push(o),i.isString(e)&&(o=l(null,e),o&&t.push(o)),i.isObject(e)&&n(e)})}var t=[];return n(e.filter),t}function l(e,n){return"$data"===n||(n&&"$column"===n?i.isString(e)?e:(console.warn('The value for filter "$column" must be a valid column key',e),!1):void 0)}function p(n,t){var r;if(i.isString(n)){var a=l(null,n);if(a){var c=e.cf.all();return function(){return c}}}return i.isString(n)||i.isNumber(n)||i.isBoolean(n)?function(e){return"undefined"==typeof e?n:o.$eq(e,function(){return n})}:i.isArray(n)?(r=i.map(n,function(e){return p(e,t)}),function(e){return r.map(function(n){return n(e)})}):i.isObject(n)?(r=i.map(n,function(n,r){var i=p(n,t),a=l(n,r);if(a){var c=e.column.find(a),s=c.values;return function(){return s}}if(o[r])return function(e){return o[r](e,i)};var f=u.parseAggregatorParams(r);return f?(t=!0,i=p(n,t),function(){return f.aggregator.apply(null,[i()].concat(f.params))}):function(e){return e=e[r],i(e,i)}}),t?1===r.length?function(e){return r[0](e)}:function(e){return i.map(r,function(n){return n(e)})}:function(e){return o.$and(e,function(e){return i.map(r,function(n){return n(e)})})}):(console.log("no expression found for ",n),!1)}return{filter:n,filterAll:t,applyFilters:c,makeFunction:p,scanForDynamicFilters:f}}},{"./aggregation":50,"./expressions":56,"./lodash":58,q:7}],58:[function(e,n,t){"use strict";function r(e){e=e||{};for(var n=1;n<arguments.length;n++)if(arguments[n])for(var t in arguments[n])arguments[n].hasOwnProperty(t)&&(e[t]=arguments[n][t]);return e}function i(e,n){return e.find(n)}function o(e,n){return e.filter(function(t,r){var i=n(t);return!!i&&(e.splice(r,1),!0)})}function u(e){return Array.isArray(e)}function a(e){return"object"==typeof e&&!u(e)}function c(e){return"boolean"==typeof e}function s(e){return"string"==typeof e}function f(e){return"number"==typeof e}function l(e){return"function"==typeof e}function p(e,n){return u(n)&&(n=n.join(".")),n.replace("[",".").replace("]","").split(".").reduce(function(e,n){return e[n]},e)}function d(e,n,t){if("string"==typeof n&&(n=n.replace("[",".").replace("]","").split(".")),n.length>1){var i=n.shift();r(e[i]="[object Object]"===Object.prototype.toString.call(e[i])?e[i]:{},n,t)}else e[n[0]]=t}function v(e,n){var t,r;if(l(n)){if(a(e)){t=[];for(r in e)e.hasOwnProperty(r)&&t.push(n(e[r],r,e));return t}return e.map(n)}if(a(e)){t=[];for(r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}return e.map(function(e){return e[n]})}function h(e){return Object.keys(e)}function y(e,n){if(l(n))return e.sort(function(e,t){return n(e)>n(t)?1:n(e)<n(t)?-1:0})}function m(e,n){if(a(e))for(var t in e)e.hasOwnProperty(t)&&n(e[t],t,e);else if(u(e))return e.forEach(n)}function g(e){return"undefined"==typeof e}function x(e,n){var t={};return m(n,function(n){"undefined"!=typeof e[n]&&(t[n]=e[n])}),t}function b(e,n){var t=[];return m(e,function(e){if(n.indexOf(e)===-1)return t.push(e)}),m(n,function(n){if(e.indexOf(n)===-1)return t.push(n)}),t}function k(e){return JSON.parse(JSON.stringify(e,function(e,n){return"function"==typeof n?n.toString():n}))}function w(e,n){if("object"==typeof e&&null!==e&&"object"==typeof n&&null!==n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var t in e)return n.hasOwnProperty(t)&&!w(e[t],n[t]),!1;return!0}return e===n}function j(e,n){var t=e.length,r=n.length;return t>r?e.splice(r,t-r):t<r&&e.push.apply(e,new Array(r-t)),m(e,function(t,r){e[r]=n[r]}),e}function A(e){var n=new Set;return e.filter(function(e){var t=!1;return n.has(e)||(n.add(e),t=!0),t})}function O(e){for(var n=[],t=0;t<e.length;++t)for(var r=e[t],i=0;i<r.length;++i)n.push(r[i]);return n}function _(e){for(var n=1;n<e.length;n++){for(var t=e[n],r=n;e[r-1]>t;)e[r]=e[r-1],--r;e[r]=t}return e}function E(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(e[t]);return n}function S(e,n){function t(e,r){for(var i in e){var o=k(r);if(o.push(i),"object"==typeof e[i]&&null!==e[i])t(e[i],o);else{if(!e.hasOwnProperty(i))continue;n(e[i],i,o)}}}return t(e,[]),e}n.exports={assign:r,find:i,remove:o,isArray:u,isObject:a,isBoolean:c,isString:s,isNumber:f,isFunction:l,get:p,set:d,map:v,keys:h,sortBy:y,forEach:m,isUndefined:g,pick:x,xor:b,clone:k,isEqual:w,replaceArray:j,uniq:A,flatten:O,sort:_,values:E,recurseObject:S}},{}],59:[function(e,n,t){"use strict";function r(e){return e.locked?o.clone(e.data):e.data}var i=e("q"),o=e("./lodash"),u=e("./aggregation");n.exports=function(){function e(e,n,t){return e.data=r(n),i.resolve(t(e,n))}function n(e,n,t){e.data=r(n),e.data=o.sortBy(e.data,function(e){return e.key}),t&&e.data.reverse()}function t(e,n,t,i){e.data=r(n),o.isUndefined(i)?(i=t||0,t=0):(t=t||0,i=i||e.data.length),e.data=e.data.splice(t,i-t)}function a(e,n,t,i,a,c){e.data=r(n),t=t||0,i=i||e.data.length;var s=e.data.splice(t,i-t),f={key:c||"Other",value:{}};o.recurseObject(a,function(e,n,t){var r=[];o.forEach(s,function(e){r.push(o.get(e.value,t))}),o.set(f.value,t,u.aggregators[e](r))}),e.data.splice(t,0,f)}function c(e,n,t,i,u){e.data=r(n),t=t||0,i=i||e.data.length;var a={key:[e.data[t].key,e.data[i].key],value:{}};o.recurseObject(u,function(n,r,u){var c=o.clone(u);c.pop(),c.push(r+"Change"),o.set(a.value,c,o.get(e.data[i].value,u)-o.get(e.data[t].value,u))}),e.data=a}function s(e,n,t,i){i=o.isUndefined(i)?0:i,e.data=r(n),o.recurseObject(t,function(n,t,r){var u=o.clone(r),a=o.clone(r),c=o.clone(r);u.pop(),a.pop(),c.pop(),u.push(t+"Change"),a.push(t+"ChangeFromStart"),c.push(t+"ChangeFromEnd");var s=o.get(e.data[0].value,r,i),f=o.get(e.data[e.data.length-1].value,r,i);o.forEach(e.data,function(n,t){var l=e.data[t-1]||e.data[0];o.set(e.data[t].value,u,o.get(n.value,r,i)-(l?o.get(l.value,r,i):i)),o.set(e.data[t].value,a,o.get(n.value,r,i)-s),o.set(e.data[t].value,c,o.get(n.value,r,i)-f)})})}return{post:e,sortByKey:n,limit:t,squash:a,change:c,changeMap:s}}},{"./aggregation":50,"./lodash":58,q:7}],60:[function(e,n,t){"use strict";function r(e){var n,t=new Error;return o.forEach(e,function(e,r){var o,a=e.success||e,c=e.fail,s=e.notify;if(n)o=n.then(function(e){if(!a)return e;var n=a(e);if(!u(n))throw t.message="Task "+r+" did not return a promise.",t;return n},function(e){if(!c)return i.reject(e);var n=c(e);if(!u(n))throw t.message="Fail for task "+r+" did not return a promise.",t;return n},s);else if(o=a(),!u(o))throw t.message="Task "+r+" did not return a promise.",t;n=o}),n||i.when()}var i=e("q"),o=e("./lodash");i.serial=r;var u=function(e){return e&&o.isFunction(e.then)}},{"./lodash":58,q:7}],61:[function(e,n,t){"use strict";var r=e("q"),i=e("./lodash");n.exports=function(n){var t=e("./reductiofy")(n),o=e("./filters")(n),u=e("./postAggregation")(n),a=i.keys(u);return function(e){function c(e){return n.column({key:e.original.groupBy,type:i.isUndefined(e.type)?null:e.type,array:Boolean(e.array)}).then(function(){var t=n.column.find(e.original.groupBy);return e.column=t,t.queries.push(e),t.removeListeners.push(function(){return e.clear()}),e})}function s(e){return r.resolve(e.column.dimension.group()).then(function(n){return e.group=n,e})}function f(e){var t=o.scanForDynamicFilters(e.original);return t.length?r.all(i.map(t,function(t){return n.column({key:t,dynamicReference:e.group})})).then(function(){return e}):e}function l(e){var t=n.onDataChange(function(){return p(e)});e.removeListeners.push(t);var r=n.onFilter(function(){return y(e)});return e.removeListeners.push(r),e}function p(e){return d(e).then(v).then(h).then(y)}function d(e){return t(e.original).then(function(n){return e.reducer=n,e})}function v(e){return r.resolve(e.reducer(e.group)).then(function(){return e})}function h(e){return r.resolve(e.group.all()).then(function(n){return e.data=n,e})}function y(e){return e.postAggregations.length>1&&(e.locked=!0),r.all(i.map(e.postAggregations,function(e){return e()})).then(function(){return e})}function m(e,t){function o(n){return i.isUndefined(n)?void(e.locked=!0):void(e.locked=Boolean(n))}function c(){e.locked=!1}function s(){return i.forEach(e.removeListeners,function(e){e()}),r["try"](function(){return e.group.dispose()}).then(function(){if(e.column.queries.splice(e.column.queries.indexOf(e),1),!e.column.queries.length)return n.clear(e.column.key)}).then(function(){return n})}function f(n){return function(){function t(){return y(o).then(function(){return o})}var i=Array.prototype.slice.call(arguments),o={};return m(o,e),i.unshift(o,e),e.postAggregations.push(function(){r.resolve(n.apply(null,i)).then(t)}),r.resolve(n.apply(null,i)).then(t)}}var l=!1;return t||(t=e,e={},l=!0),i.assign(e,{universe:n,crossfilter:n.cf,parent:t,column:t.column,dimension:t.dimension,group:t.group,reducer:t.reducer,original:t.original,hash:t.hash,removeListeners:[],postAggregations:[],locked:l,lock:o,unlock:c,clear:s}),i.forEach(a,function(n){e[n]=f(u[n])}),e}for(var g=JSON.stringify(e),x=0;x<n.columns.length;x++)for(var b=0;b<n.columns[x].queries.length;b++)if(n.columns[x].queries[b].hash===g)return r["try"](function(){return n.columns[x].queries[b]});var k={original:e,hash:g};return i.isUndefined(k.original)&&(k.original={}),i.isUndefined(k.original.select)&&(k.original.select={$count:!0}),k.original.groupBy=k.original.groupBy||!0,k=m(k),c(k).then(s).then(f).then(l).then(p)}}},{"./filters":57,"./lodash":58,"./postAggregation":59,"./reductiofy":63,q:7}],62:[function(e,n,t){"use strict";function r(e){return e.count(!0)}function i(e,n){return e.sum(n)}function o(e,n){return e.avg(n)}function u(e,n){return e.min(n)}function a(e,n){return e.max(n)}function c(e,n){return e.median(n)}function s(e,n){return e.sumOfSq(n)}function f(e,n){return e.std(n)}function l(e,n){return e.valueList(n)}function p(e){return e.dataList(!0)}n.exports={shorthandLabels:{$count:"count",$sum:"sum",$avg:"avg",$min:"min",$max:"max",$med:"med",$sumSq:"sumSq",$std:"std"},aggregators:{$count:r,$sum:i,$avg:o,$min:u,$max:a,$med:c,$sumSq:s,$std:f,$valueList:l,$dataList:p}}},{}],63:[function(e,n,t){"use strict";var r=e("reductio"),i=e("./lodash"),o=e("./reductioAggregators"),u=e("./aggregation");n.exports=function(n){var t=e("./filters")(n);return function(e){function n(e,t){var r=i.sortBy(i.map(t,function(e,n){return{key:n,value:e}}),function(e){return o.aggregators[e.key]?0:1});return i.forEach(r,function(t){if(o.aggregators[t.key]){var r=u.makeValueAccessor(t.value);return void(e=o.aggregators[t.key](e,r))}return i.isObject(t.value)?void(e=n(e.value(t.key),t.value)):void console.error("Nested selects must be an object",t.key)})}var a=r();if(n(a,e.select),e.filter){var c=t.makeFunction(e.filter);c&&a.filter(c)}return Promise.resolve(a)}}},{"./aggregation":50,"./filters":57,"./lodash":58,"./reductioAggregators":62,reductio:43}],64:[function(e,n,t){"use strict";function r(n,t){function r(e){return u.dataListeners.push(e),function(){u.dataListeners.splice(u.dataListeners.indexOf(e),1)}}function o(e){return u.filterListeners.push(e),function(){u.filterListeners.splice(u.filterListeners.indexOf(e),1)}}var u={options:i.assign({},t),columns:[],filters:{},dataListeners:[],filterListeners:[]},a=e("./crossfilter")(u),c=e("./filters")(u);return n=a.generateColumns(n),a.build(n).then(function(n){return u.cf=n,i.assign(u,{add:a.add,remove:a.remove,column:e("./column")(u),query:e("./query")(u),filter:c.filter,filterAll:c.filterAll,clear:e("./clear")(u),destroy:e("./destroy")(u),onDataChange:r,onFilter:o})})}e("./q.serial");var i=e("./lodash");n.exports=r},{"./clear":51,"./column":52,"./crossfilter":53,"./destroy":54,"./filters":57,"./lodash":58,"./q.serial":60,"./query":61}]},{},[64])(64)});